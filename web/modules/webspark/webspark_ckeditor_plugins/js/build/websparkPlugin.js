!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.websparkPlugin=t())}(self,(()=>(()=>{var e={"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/colorinput.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-input-color {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\n\t& > input.ck.ck-input-text {\n\t\tmin-width: auto;\n\t\tflex-grow: 1;\n\t}\n\n\t& > div.ck.ck-dropdown {\n\t\tmin-width: auto;\n\n\t\t/* This dropdown has no arrow but a color preview instead. */\n\t\t& > .ck-input-color__button .ck-dropdown__arrow {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t& .ck.ck-input-color__button {\n\t\t/* Resolving issue with misaligned buttons on Safari (see #10589) */\n\t\tdisplay: flex;\n\n\t\t& .ck.ck-input-color__button__preview {\n\t\t\tposition: relative;\n\t\t\toverflow: hidden;\n\n\t\t\t& > .ck.ck-input-color__button__preview__no-color-indicator {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/form.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/formrow.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-form__row {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\tjustify-content: space-between;\n\n\t/* Ignore labels that work as fieldset legends */\n\t& > *:not(.ck-label) {\n\t\tflex-grow: 1;\n\t}\n\n\t&.ck-table-form__action-row {\n\t\t& .ck-button-save,\n\t\t& .ck-button-cancel {\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/inserttable.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck .ck-insert-table-dropdown__grid {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/table.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,'/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck-content .table {\n\t/* Give the table widget some air and center it horizontally */\n\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\n\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\n\tmargin: 0.9em auto;\n\tdisplay: table;\n\n\t& table {\n\t\t/* The table cells should have slight borders */\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n\n\t\t/* Table width and height are set on the parent <figure>. Make sure the table inside stretches\n\t\tto the full dimensions of the container (https://github.com/ckeditor/ckeditor5/issues/6186). */\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\t/* The outer border of the table should be slightly darker than the inner lines.\n\t\tAlso see https://github.com/ckeditor/ckeditor5-table/issues/50. */\n\t\tborder: 1px double hsl(0, 0%, 70%);\n\n\t\t& td,\n\t\t& th {\n\t\t\tmin-width: 2em;\n\t\t\tpadding: .4em;\n\n\t\t\t/* The border is inherited from .ck-editor__nested-editable styles, so theoretically it\'s not necessary here.\n\t\t\tHowever, the border is a content style, so it should use .ck-content (so it works outside the editor).\n\t\t\tHence, the duplication. See https://github.com/ckeditor/ckeditor5/issues/6314 */\n\t\t\tborder: 1px solid hsl(0, 0%, 75%);\n\t\t}\n\n\t\t& th {\n\t\t\tfont-weight: bold;\n\t\t\tbackground: hsla(0, 0%, 0%, 5%);\n\t\t}\n\t}\n}\n\n/* Text alignment of the table header should match the editor settings and override the native browser styling,\nwhen content is available outside the editor. See https://github.com/ckeditor/ckeditor5/issues/6638 */\n.ck-content[dir="rtl"] .table th {\n\ttext-align: right;\n}\n\n.ck-content[dir="ltr"] .table th {\n\ttext-align: left;\n}\n\n.ck-editor__editable .ck-table-bogus-paragraph {\n\t/*\n\t * Use display:inline-block to force Chrome/Safari to limit text mutations to this element.\n\t * See https://github.com/ckeditor/ckeditor5/issues/6062.\n\t */\n\tdisplay: inline-block;\n\n\t/*\n\t * Inline HTML elements nested in the span should always be dimensioned in relation to the whole cell width.\n\t * See https://github.com/ckeditor/ckeditor5/issues/9117.\n\t */\n\twidth: 100%;\n}\n',""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecaption.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-selector-caption-background: hsl(0, 0%, 97%);\n\t--ck-color-selector-caption-text: hsl(0, 0%, 20%);\n\t--ck-color-selector-caption-highlighted-background: hsl(52deg 100% 50%);\n}\n\n/* Content styles */\n.ck-content .table > figcaption {\n\tdisplay: table-caption;\n\tcaption-side: top;\n\tword-break: break-word;\n\ttext-align: center;\n\tcolor: var(--ck-color-selector-caption-text);\n\tbackground-color: var(--ck-color-selector-caption-background);\n\tpadding: .6em;\n\tfont-size: .75em;\n\toutline-offset: -1px;\n}\n\n/* Editing styles */\n.ck.ck-editor__editable .table > figcaption {\n\t&.table__caption_highlighted {\n\t\tanimation: ck-table-caption-highlight .6s ease-out;\n\t}\n\n\t&.ck-placeholder::before {\n\t\tpadding-left: inherit;\n\t\tpadding-right: inherit;\n\n\t\t/*\n\t\t * Make sure the table caption placeholder doesn't overflow the placeholder area.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\n\t\t */\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n@keyframes ck-table-caption-highlight {\n\t0% {\n\t\tbackground-color: var(--ck-color-selector-caption-highlighted-background);\n\t}\n\n\t100% {\n\t\tbackground-color: var(--ck-color-selector-caption-background);\n\t}\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecellproperties.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-table-cell-properties-form {\n\t& .ck-form__row {\n\t\t&.ck-table-cell-properties-form__alignment-row {\n\t\t\tflex-wrap: wrap;\n\n\t\t\t& .ck.ck-toolbar {\n\t\t\t\t&:first-of-type {\n\t\t\t\t\t/* 4 buttons out of 7 (h-alignment + v-alignment) = 0.57 */\n\t\t\t\t\tflex-grow: 0.57;\n\t\t\t\t}\n\n\t\t\t\t&:last-of-type {\n\t\t\t\t\t/* 3 buttons out of 7 (h-alignment + v-alignment) = 0.43 */\n\t\t\t\t\tflex-grow: 0.43;\n\t\t\t\t}\n\n\t\t\t\t& .ck-button {\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecolumnresize.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n:root {\n\t--ck-color-selector-column-resizer-hover: var(--ck-color-base-active);\n\t--ck-table-column-resizer-width: 7px;\n\n\t/* The offset used for absolute positioning of the resizer element, so that it is placed exactly above the cell border.\n\t   The value is: minus half the width of the resizer decreased additionaly by the half the width of the border (0.5px). */\n\t--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -0.5 - 0.5px);\n}\n\n.ck-content .table .ck-table-resized {\n\ttable-layout: fixed;\n}\n\n.ck-content .table table {\n\toverflow: hidden;\n}\n\n.ck-content .table td,\n.ck-content .table th {\n\t/* To prevent text overflowing beyond its cell when columns are resized by resize handler\n\t(https://github.com/ckeditor/ckeditor5/pull/14379#issuecomment-1589460978). */\n\toverflow-wrap: break-word;\n\tposition: relative;\n}\n\n.ck.ck-editor__editable .table .ck-table-column-resizer {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tright: var(--ck-table-column-resizer-position-offset);\n\twidth: var(--ck-table-column-resizer-width);\n\tcursor: col-resize;\n\tuser-select: none;\n\tz-index: var(--ck-z-default);\n}\n\n.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer {\n\tdisplay: none;\n}\n\n/* The resizer elements, which are extended to an extremely high height, break the drag & drop feature in Chrome. To make it work again,\n   all resizers must be hidden while the table is dragged. */\n.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer {\n\tdisplay: none;\n}\n\n.ck.ck-editor__editable .table .ck-table-column-resizer:hover,\n.ck.ck-editor__editable .table .ck-table-column-resizer__active {\n\tbackground-color: var(--ck-color-selector-column-resizer-hover);\n\topacity: 0.25;\n\t/* The resizer element resides in each cell so to occupy the entire height of the table, which is unknown from a CSS point of view,\n\t   it is extended to an extremely high height. Even for screens with a very high pixel density, the resizer will fulfill its role as\n\t   it should, i.e. for a screen of 476 ppi the total height of the resizer will take over 350 sheets of A4 format, which is totally\n\t   unrealistic height for a single table. */\n\ttop: -999999px;\n\tbottom: -999999px;\n}\n\n.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer {\n\tleft: var(--ck-table-column-resizer-position-offset);\n\tright: unset;\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableediting.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableform.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,'/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-table-form {\n\t& .ck-form__row {\n\t\t&.ck-table-form__border-row {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n\t\t&.ck-table-form__background-row {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n\t\t&.ck-table-form__dimensions-row {\n\t\t\tflex-wrap: wrap;\n\t\t\talign-items: center;\n\n\t\t\t& .ck-labeled-field-view {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column-reverse;\n\t\t\t\talign-items: center;\n\n\t\t\t\t& .ck.ck-dropdown {\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .ck-table-form__dimension-operator {\n\t\t\t\tflex-grow: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t& .ck.ck-labeled-field-view {\n\t\t/* Allow absolute positioning of the status (error) balloons. */\n\t\tposition: relative;\n\n\t\t& .ck.ck-labeled-field-view__status {\n\t\t\tposition: absolute;\n\t\t\tleft: 50%;\n\t\t\tbottom: calc( -1 * var(--ck-table-properties-error-arrow-size) );\n\t\t\ttransform: translate(-50%,100%);\n\n\t\t\t/* Make sure the balloon status stays on top of other form elements. */\n\t\t\tz-index: 1;\n\n\t\t\t/* The arrow pointing towards the field. */\n\t\t\t&::after {\n\t\t\t\tcontent: "";\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: calc( -1 * var(--ck-table-properties-error-arrow-size) );\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translateX( -50% );\n\t\t\t}\n\t\t}\n\t}\n}\n',""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableproperties.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n.ck.ck-table-properties-form {\n\t& .ck-form__row {\n\t\t&.ck-table-properties-form__alignment-row {\n\t\t\tflex-wrap: wrap;\n\t\t\tflex-basis: 0;\n\t\t\talign-content: baseline;\n\n\t\t\t& .ck.ck-toolbar .ck-toolbar__items {\n\t\t\t\tflex-wrap: nowrap;\n\t\t\t}\n\t\t}\n\t}\n}\n",""]);const r=l},"./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableselection.css":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(s),i=n("./node_modules/css-loader/dist/runtime/api.js"),l=n.n(i)()(o());l.push([e.id,"/*\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n",""]);const r=l},"./node_modules/css-loader/dist/runtime/api.js":e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(s)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(l[a]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);s&&l[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":e=>{"use strict";e.exports=function(e){return e[1]}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":(e,t,n)=>{"use strict";var s,o=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[];function r(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},s=[],o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],c=n[a]||0,d="".concat(a," ").concat(c);n[a]=c+1;var u=r(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(l[u].references++,l[u].updater(h)):l.push({identifier:d,updater:w(h,t),references:1}),s.push(d)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var o=n.nc;o&&(s.nonce=o)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var l=i(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,s){var o=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function m(e,t,n){var s=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var g=null,p=0;function w(e,t){var n,s,o;if(t.singleton){var i=p++;n=g||(g=c(t)),s=h.bind(null,n,i,!1),o=h.bind(null,n,i,!0)}else n=c(t),s=m.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var o=r(n[s]);l[o].references--}for(var i=a(e,t),c=0;c<n.length;c++){var d=r(n[c]);0===l[d].references&&(l[d].updater(),l.splice(d,1))}n=i}}}},"ckeditor5/src/core.js":(e,t,n)=>{e.exports=n("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/engine.js":(e,t,n)=>{e.exports=n("dll-reference CKEditor5.dll")("./src/engine.js")},"ckeditor5/src/ui.js":(e,t,n)=>{e.exports=n("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,n)=>{e.exports=n("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,t,n)=>{e.exports=n("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={id:s,exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var s={};return(()=>{"use strict";n.d(s,{default:()=>In});var e=n("ckeditor5/src/core.js"),t=n("ckeditor5/src/widget.js");class o extends e.Command{execute({href:e,text:t,styles:n,target:s,size:o}){const{model:i}=this.editor;i.change((l=>{const r=l.createElement("websparkButton",{text:t,href:e,target:s,styles:n,size:o}),a=l.createElement("websparkButtonText"),c=l.createText(t);l.append(c,a),l.append(a,r),i.insertContent(r)}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"websparkButton");this.isEnabled=null!==n;const s=t.getSelectedElement();if("websparkButton"===s?.name){const e=s?.getChild(0)?.getChild(0)?._data;this.value={...Object.fromEntries(s.getAttributes()),text:e}}else this.value=null;setTimeout((function(){let e=document.getElementById("ckeditor5-off-canvas-reset");e&&(document.body.removeChild(e),e.textContent=e.textContent.replace("#drupal-off-canvas-wrapper [data-drupal-ck-style-fence] .ck.ck-content * {display:revert;background:revert;color:initial;padding:revert;}",""),document.body.appendChild(e))}),500)}}var i=n("ckeditor5/src/ui.js");class l extends i.View{constructor(e,t,n){super(e);const s=this.bindTemplate;this.set("value",t[0]?.value||n);const o=t.map((e=>({tag:"option",attributes:{value:e.value,selected:s.if("value","",(t=>t===e.value))},children:[e.title]})));this.on("select",((e,t)=>{this.set("value",t.target.value)})),this.setTemplate({tag:"select",attributes:{class:["ck-webspark-form-select"]},children:o,on:{change:s.to("select")}})}}class r extends i.View{constructor(e,t){super(e);const n=this.bindTemplate;this.set("value",t||""),this.setTemplate({tag:"textarea",attributes:{class:["ck-webspark-form-textarea"]},on:{input:n.to("value")}})}}function a(e,t=[]){return{tag:"div",attributes:{class:["ck-webspark-form-container",...t]},children:e}}function c(...e){return{tag:"div",attributes:{class:["ck-webspark-form-row"]},children:e}}function d(e,t,n){const s=new i.LabelView(n),o=new l(n,t,t[0].value);return s.text=e,a([s,o])}function u(e,t){const n=new i.LabelView(t),s=new i.InputTextView(t);return n.text=e,a([n,s])}function h(e,t,n,s){const o=new i.ButtonView(s);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),o}function m(e,t,n="default"){if(!p(t))for(const n in t)if(e.includes(n))return t[n];return n}function g(e,t){const n=new i.LabelView(t),s=new r(t);return n.text=e,a([n,s])}const p=e=>0===Object.keys(e).length;class w extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkButton",new o(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("websparkButton",{isObject:!0,allowWhere:"$block",allowAttributes:["text","href","target","styles","role","size"]}),e.register("websparkButtonText",{isLimit:!0,allowIn:"websparkButton",allowContentOf:"$block"})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({view:{name:"a",classes:["btn",/^btn-(gold|maroon|gray|dark)$/],attributes:!0},model:(e,{writer:t})=>{const n=e.getAttribute("class");return t.createElement("websparkButton",{text:e.getAttribute("text"),href:e.getAttribute("href"),styles:m(n,{"btn-gold":"gold","btn-maroon":"maroon","btn-gray":"gray","btn-dark":"dark"},null),size:m(n,{"btn-md":"md","btn-sm":"sm"},"default"),role:"button",target:e.getAttribute("target")||"unset"})}}),e.for("dataDowncast").elementToElement({model:"websparkButton",view:(e,{writer:t})=>{const n=e.getAttribute("target");let s=`btn btn-${e.getAttribute("styles")}`;const o=e.getAttribute("size");return"default"!==o&&(s+=` btn-${o}`),t.createContainerElement("a",{class:s,href:e.getAttribute("href"),role:"button",..."unset"!==n&&{target:n}})}}),e.for("editingDowncast").elementToElement({model:"websparkButton",view:(e,{writer:n})=>{let s=`btn btn-${e.getAttribute("styles")}`;const o=e.getAttribute("size");"default"!==o&&(s+=` btn-${o}`);const i=n.createContainerElement("a",{class:s});return(0,t.toWidget)(i,n,{label:"Webspark button"})}}),e.for("upcast").elementToElement({model:"websparkButtonText",view:{name:"span",classes:"text"}}),e.for("dataDowncast").elementToElement({model:"websparkButtonText",view:{name:"span",classes:"text"}}),e.for("editingDowncast").elementToElement({model:"websparkButtonText",view:(e,{writer:n})=>{const s=n.createEditableElement("span",{class:"text"});return(0,t.toWidgetEditable)(s,n)}})}}var b=n("ckeditor5/src/utils.js");class f extends i.View{DEFAULT_TEXT="Button";DEFAULT_HREF="#";DEFAULT_STYLE="gold";DEFAULT_SIZE="default";DEFAULT_TARGET="unset";constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.textInputView=u(s("Text"),n),this.urlInputView=u(s("URL"),n),this.styleSelect=d(s("Style"),this._getStyleOptions(s),n),this.sizeSelect=d(s("Size"),this._getSizeOptions(s),n),this.targetSelect=d(s("Target"),this._getTargetOptions(s),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form"],tabindex:"-1"},children:[c(this.textInputView,this.urlInputView),c(this.styleSelect,this.sizeSelect,this.targetSelect),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.textInputView.children[1],this.urlInputView.children[1],this.styleSelect.children[1],this.sizeSelect.children[1],this.targetSelect.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get text(){return this.textInputView.children[1].element.value.trim()}set text(e){this.textInputView.children[1].element.value=e.trim()}get href(){return this.urlInputView.children[1].element.value.trim()}set href(e){this.urlInputView.children[1].element.value=e.trim()}get styles(){return this.styleSelect.children[1].value}set styles(e){this.styleSelect.children[1].value=e}get size(){return this.sizeSelect.children[1].value}set size(e){this.sizeSelect.children[1].value=e}get target(){return this.targetSelect.children[1].value}set target(e){this.targetSelect.children[1].value=e}setValues(e){this.text=e?.text||this.DEFAULT_TEXT,this.href=e?.href||this.DEFAULT_HREF,this.styles=e?.styles||this.DEFAULT_STYLE,this.size=e?.size||this.DEFAULT_SIZE,this.target=e?.target||this.DEFAULT_TARGET}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return t.includes("text")?this.textInputView.errorText=t:t.includes("URL")&&(this.urlInputView.errorText=t),!1}return!0}resetFormStatus(){this.textInputView.errorText=null,this.urlInputView.errorText=null}_getStyleOptions(e){return[{value:"gold",title:e("Button Gold")},{value:"maroon",title:e("Button Maroon")},{value:"gray",title:e("Button Gray 2")},{value:"dark",title:e("Button Gray 7")}]}_getSizeOptions(e){return[{value:"default",title:e("Default")},{value:"md",title:e("Medium")},{value:"sm",title:e("Small")}]}_getTargetOptions(e){return[{value:"",title:e("Not set")},{value:"_blank",title:e("New window (_blank)")},{value:"_top",title:e("Topmost window (_top)")},{value:"_self",title:e("Same window (_self)")},{value:"_parent",title:e("Parent window (_parent)")}]}}class k extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkButton");this.form=new f((e.t,[e=>{}]),e.locale,t),e.ui.componentFactory.add("websparkButton",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Button"),icon:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="100%" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">\n<path fill="#FFFFFF" opacity="1.000000" stroke="none" \n\td="\nM37.000000,73.000000 \n\tC24.666666,73.000000 12.833333,73.000000 1.000000,73.000000 \n\tC1.000000,49.000000 1.000000,25.000000 1.000000,1.000000 \n\tC25.000000,1.000000 49.000000,1.000000 73.000000,1.000000 \n\tC73.000000,25.000000 73.000000,49.000000 73.000000,73.000000 \n\tC61.166668,73.000000 49.333332,73.000000 37.000000,73.000000 \nM51.488518,27.002369 \n\tC39.183563,27.001835 26.878611,27.002577 14.573657,26.999577 \n\tC12.389810,26.999044 10.006021,26.682770 10.004490,29.996738 \n\tC10.001911,35.582336 10.003784,41.167934 10.003784,46.708206 \n\tC28.314724,46.708206 46.016563,46.708206 63.694138,46.708206 \n\tC63.694138,40.024033 63.694138,33.635628 63.694138,27.002369 \n\tC59.754177,27.002369 56.118122,27.002369 51.488518,27.002369 \nz"/>\n<path fill="#464646" opacity="1.000000" stroke="none" \n\td="\nM51.985291,27.002369 \n\tC56.118122,27.002369 59.754177,27.002369 63.694138,27.002369 \n\tC63.694138,33.635628 63.694138,40.024033 63.694138,46.708206 \n\tC46.016563,46.708206 28.314724,46.708206 10.003784,46.708206 \n\tC10.003784,41.167934 10.001911,35.582336 10.004490,29.996738 \n\tC10.006021,26.682770 12.389810,26.999044 14.573657,26.999577 \n\tC26.878611,27.002577 39.183563,27.001835 51.985291,27.002369 \nz"/>\n</svg>',tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.textInputView.children[1].select(),t.focus()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("insertWebsparkButton",{text:t.text,href:t.href,styles:t.styles,size:t.size,target:t.target}),l())})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class v extends e.Plugin{static get requires(){return[w,k]}}class C extends e.Command{execute(e){const{model:t}=this.editor;t.change((e=>{t.insertContent(function(e){const t=e.createElement("websparkDivider");return e.setAttribute("class","copy-divider",t),t}(e))}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"$block");this.isEnabled=null!==n}}class y extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkDivider",new C(this.editor))}_defineSchema(){this.editor.model.schema.register("websparkDivider",{isObject:!0,allowWhere:"$block"})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({view:{name:"hr",classes:"copy-divider"},model:(e,{writer:t})=>t.createElement("websparkDivider"),converterPriority:"high"}),e.for("dataDowncast").elementToElement({model:"websparkDivider",view:(e,{writer:t})=>t.createEmptyElement("hr",{class:"copy-divider"})}),e.for("editingDowncast").elementToElement({model:"websparkDivider",view:(e,{writer:n})=>{const s=n.createContainerElement("div",null,n.createEmptyElement("hr",{class:"copy-divider"}));return n.addClass("copy-divider",s),n.setCustomProperty("hr",!0,s),(0,t.toWidget)(s,n,{label:"Webspark divider"})}})}}class T extends e.Plugin{init(){const e=this.editor;e.t;e.ui.componentFactory.add("websparkDivider",(t=>{const n=e.commands.get("insertWebsparkDivider"),s=new i.ButtonView(t);return s.set({label:e.t("Divider"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72" version="1.1"><path d="M 10 36 C 10 37.949, 10.667 38, 36 38 C 61.333 38, 62 37.949, 62 36 C 62 34.051, 61.333 34, 36 34 C 10.667 34, 10 34.051, 10 36" stroke="none" fill="#ffc424" fill-rule="evenodd"/><path d="" stroke="none" fill="#fcc424" fill-rule="evenodd"/></svg>',tooltip:!0}),s.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(s,"execute",(()=>e.execute("insertWebsparkDivider"))),s}))}}class _ extends e.Plugin{static get requires(){return[y,T]}}class x extends e.Command{execute({text:e}){const{model:t}=this.editor;t.change((n=>{const s=n.createElement("websparkLead"),o=n.createElement("websparkLeadText"),i=n.createText(e);n.append(i,o),n.append(o,s),t.insertContent(s)}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"websparkLead");this.isEnabled=null!==n;const s=t.getSelectedElement();if("websparkLead"===s?.name){const e=s.getChild(0)?.getChild(0);e&&(this.value={...Object.fromEntries(e.getAttributes()),text:e._data??""})}else this.value=null}}class S extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkLead",new x(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("websparkLead",{isObject:!0,allowWhere:"$block"}),e.register("websparkLeadText",{allowIn:"websparkLead",allowAttributes:["classes"],allowChildren:"$text"})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({view:{name:"p",class:"lead"},model:(e,{writer:t})=>{const n=e.getAttribute("class");return t.createElement("websparkLeadText",{classes:n})}}),e.for("dataDowncast").elementToElement({model:"websparkLeadText",view:(e,{writer:t})=>t.createContainerElement("p",{class:"lead"})}),e.for("editingDowncast").elementToElement({model:"websparkLeadText",view:(e,{writer:n})=>{const s=n.createEditableElement("p",{class:"lead"});return(0,t.toWidgetEditable)(s,n,{label:"Lead Text"})}}),e.for("upcast").elementToElement({view:{name:"div",classes:["uds-lead"]},model:(e,{writer:t})=>t.createElement("websparkLead")}),e.for("dataDowncast").elementToElement({model:"websparkLead",view:(e,{writer:t})=>t.createContainerElement("div",{class:"uds-lead"})}),e.for("editingDowncast").elementToElement({model:"websparkLead",view:(e,{writer:n})=>{const s=n.createContainerElement("div",{class:"uds-lead"});return(0,t.toWidget)(s,n,{label:"Lead"})}})}}class E extends i.View{DEFAULT_TEXT="";constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.textInputView=g(s("Content"),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form","webspark-heading-dialog"],tabindex:"-1"},children:[c(this.textInputView),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.textInputView.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get text(){return this.textInputView.children[1].element.value.trim()}set text(e){this.textInputView.children[1].element.value=e.trim()}setValues(e){this.text=e?.text||this.DEFAULT_TEXT}isValid(){return!0}resetFormStatus(){this.textInputView.errorText=null}}class A extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkLead");this.form=new E((e.t,[e=>{}]),e.locale,t),e.ui.componentFactory.add("websparkLead",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Lead"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72" version="1.1"><path d="" stroke="none" fill="#484444" fill-rule="evenodd"/><path d="M 22 36 L 22 54 26 54 L 30 54 30 47 L 30 40 36.050 40 C 42.558 40, 47.294 38.188, 48.970 35.055 C 49.537 33.997, 50 31.042, 50 28.489 C 50 24.691, 49.468 23.314, 47.077 20.923 C 44.198 18.044, 43.987 18, 33.077 18 L 22 18 22 36 M 30 29.127 L 30 34.254 35.107 33.764 C 40.442 33.251, 41.959 32.030, 41.985 28.225 C 42.002 25.597, 38.771 24, 33.435 24 L 30 24 30 29.127" stroke="none" fill="#444444" fill-rule="evenodd"/></svg>',tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.textInputView.children[1].element.select()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("insertWebsparkLead",{text:t.text}),l())})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class V extends e.Plugin{static get requires(){return[S,A]}}class R extends e.Command{execute({text:e,styles:t,heading:n}){const{model:s}=this.editor;s.change((o=>{const i=o.createElement("websparkHighlightedHeading"),l=o.createElement("websparkHighlightedHeadingHelement",{level:n}),r=o.createElement("websparkHighlightedHeadingText",{styles:t}),a=o.createText(e);o.append(a,r),o.append(r,l),o.append(l,i),s.insertContent(i)}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"websparkHighlightedHeading");this.isEnabled=null!==n;const s=t.getSelectedElement();if("websparkHighlightedHeading"===s?.name){const e=s.getChild(0)?.getChild(0);e&&(this.value={...Object.fromEntries(e.getAttributes()),text:e.getChild(0)?._data??"",heading:e.parent.getAttribute("level")})}else this.value=null}}class I extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkHighlightedHeading",new R(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("websparkHighlightedHeading",{isObject:!0,allowWhere:"$block"}),e.register("websparkHighlightedHeadingHelement",{allowIn:"websparkHighlightedHeading",allowAttributes:["level"]}),e.register("websparkHighlightedHeadingText",{allowIn:"websparkHighlightedHeadingHelement",allowAttributes:["styles"],allowChildren:"$text"})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({view:{name:/^(h1|h2|h3|h4)$/},model:(e,{writer:t})=>t.createElement("websparkHighlightedHeadingHelement",{level:e.name})}),e.for("downcast").elementToElement({model:{name:"websparkHighlightedHeadingHelement",attributes:["level"]},view:(e,{writer:t})=>t.createContainerElement(e.getAttribute("level"))}),e.for("upcast").elementToElement({view:{name:"span",classes:[/^highlight-(gold|black|white)$/]},model:(e,{writer:t})=>{const n=e.getAttribute("class");return t.createElement("websparkHighlightedHeadingText",{styles:m(n,{"highlight-gold":"gold","highlight-black":"black","highlight-white":"white"},null)})}}),e.for("dataDowncast").elementToElement({model:"websparkHighlightedHeadingText",view:(e,{writer:t})=>{const n=`highlight-${e.getAttribute("styles")}`;return t.createContainerElement("span",{class:n})}}),e.for("editingDowncast").elementToElement({model:"websparkHighlightedHeadingText",view:(e,{writer:n})=>{const s=`highlight-${e.getAttribute("styles")}`,o=n.createEditableElement("span",{class:s});return(0,t.toWidgetEditable)(o,n,{label:"Highlighted Text"})}}),e.for("upcast").elementToElement({view:{name:"div",classes:["uds-highlighted-heading"]},model:(e,{writer:t})=>t.createElement("websparkHighlightedHeading")}),e.for("dataDowncast").elementToElement({model:"websparkHighlightedHeading",view:(e,{writer:t})=>t.createContainerElement("div",{class:"uds-highlighted-heading"})}),e.for("editingDowncast").elementToElement({model:"websparkHighlightedHeading",view:(e,{writer:n})=>{const s=n.createContainerElement("div",{class:"uds-highlighted-heading"});return(0,t.toWidget)(s,n,{label:"Highlighted Heading"})}})}}class B extends i.View{DEFAULT_TEXT="";DEFAULT_STYLE="gold";DEFAULT_HEADING="h1";constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.textInputView=g(s("Content"),n),this.styleSelect=d(s("Style"),this._getStyleOptions(s),n),this.headingSelect=d(s("Heading"),this._getHeadingOptions(s),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form","webspark-heading-dialog"],tabindex:"-1"},children:[c(this.textInputView),c(this.styleSelect,this.headingSelect),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.textInputView.children[1],this.styleSelect.children[1],this.headingSelect.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get text(){return this.textInputView.children[1].element.value.trim()}set text(e){this.textInputView.children[1].element.value=e.trim()}get styles(){return this.styleSelect.children[1].value}set styles(e){this.styleSelect.children[1].value=e}get heading(){return this.headingSelect.children[1].value}set heading(e){this.headingSelect.children[1].value=e}setValues(e){this.text=e?.text||this.DEFAULT_TEXT,this.styles=e?.styles||this.DEFAULT_STYLE,this.heading=e?.heading||this.DEFAULT_HEADING}isValid(){return!0}resetFormStatus(){this.textInputView.errorText=null}_getStyleOptions(e){return[{value:"gold",title:e("Gold Highlight")},{value:"black",title:e("Gray 7 Highlight")},{value:"white",title:e("White Highlight")}]}_getHeadingOptions(e){return[{value:"h1",title:e("H1")},{value:"h2",title:e("H2")},{value:"h3",title:e("H3")},{value:"h4",title:e("H4")}]}}class L extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkHighlightedHeading");this.form=new B((e.t,[e=>{}]),e.locale,t),e.ui.componentFactory.add("websparkHighlightedHeading",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Highlighted Heading"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="71" height="72" viewBox="0 0 71 72" version="1.1"><path d="M 50.123 17.042 C 46.088 17.947, 42.375 21.462, 41.453 25.250 C 40.819 27.853, 40.970 28, 44.277 28 C 46.899 28, 48.178 27.377, 49.408 25.500 C 51.193 22.776, 55.681 22.081, 57.800 24.200 C 60.678 27.078, 59.075 30.088, 50 38.841 C 41.819 46.731, 41 47.861, 41 51.260 L 41 55 54 55 L 67 55 67 52 L 67 49 58.500 49 C 53.714 49, 50 48.579, 50 48.036 C 50 47.507, 52.794 44.748, 56.209 41.906 C 63.780 35.605, 65.834 33.079, 66.633 29.087 C 68.275 20.874, 59.989 14.828, 50.123 17.042 M 4 36 L 4 55 8 55 L 12 55 12 47 L 12 39 20.500 39 L 29 39 29 47 L 29 55 33 55 L 37 55 37 36 L 37 17 33 17 L 29 17 29 24.500 L 29 32 20.500 32 L 12 32 12 24.500 L 12 17 8 17 L 4 17 4 36" stroke="none" fill="#21201c" fill-rule="evenodd"/><path d="M -0 36.013 L -0 72.025 35.750 71.763 L 71.500 71.500 71.763 35.750 L 72.025 -0 36.013 -0 L 0 0 -0 36.013 M 0.451 36.500 C 0.451 56.300, 0.585 64.542, 0.748 54.815 C 0.912 45.088, 0.912 28.888, 0.749 18.815 C 0.586 8.742, 0.452 16.700, 0.451 36.500 M 50.123 17.042 C 46.088 17.947, 42.375 21.462, 41.453 25.250 C 40.819 27.853, 40.970 28, 44.277 28 C 46.899 28, 48.178 27.377, 49.408 25.500 C 51.193 22.776, 55.681 22.081, 57.800 24.200 C 60.678 27.078, 59.075 30.088, 50 38.841 C 41.819 46.731, 41 47.861, 41 51.260 L 41 55 54 55 L 67 55 67 52 L 67 49 58.500 49 C 53.714 49, 50 48.579, 50 48.036 C 50 47.507, 52.794 44.748, 56.209 41.906 C 63.780 35.605, 65.834 33.079, 66.633 29.087 C 68.275 20.874, 59.989 14.828, 50.123 17.042 M 4 36 L 4 55 8 55 L 12 55 12 47 L 12 39 20.500 39 L 29 39 29 47 L 29 55 33 55 L 37 55 37 36 L 37 17 33 17 L 29 17 29 24.500 L 29 32 20.500 32 L 12 32 12 24.500 L 12 17 8 17 L 4 17 4 36" stroke="none" fill="#facc48" fill-rule="evenodd"/></svg>',tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.textInputView.children[1].element.select()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("insertWebsparkHighlightedHeading",{text:t.text,styles:t.styles,heading:t.heading}),l())})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class H extends e.Plugin{static get requires(){return[I,L]}}class D extends e.Command{execute({text:e,citationName:t,citationDescription:n}){const{model:s}=this.editor;s.change((o=>{const i=o.createElement("websparkBlockquote"),l=o.createElement("websparkBlockQuoteSvg"),r=o.createElement("websparkBlockQuoteContainer"),a=o.createElement("websparkBlockquoteParagraph"),c=o.createElement("websparkBlockquoteCitation"),d=o.createElement("websparkBlockquoteCitationName"),u=o.createElement("websparkBlockquoteCitationDescription"),h=o.createText(e);if(o.append(h,a),t.length>0){const e=o.createText(t);o.append(e,d),o.append(d,c)}if(n.length>0){const e=o.createText(n);o.append(e,u),o.append(u,c)}o.append(l,i),o.append(a,r),o.append(c,r),o.append(r,i),s.insertContent(i)}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"websparkBlockquote");this.isEnabled=null!==n;const s=t.getSelectedElement();if("websparkBlockquote"===s?.name){const t=s?.getChild(0)?.getChild(0)?._data;e.change((e=>{e.setAttribute("text",t,s)})),this.value=Object.fromEntries(s.getAttributes())}else this.value=null}_defaultSvgPath(){return"M113.61,245.82H0V164.56q0-49.34,8.69-77.83T40.84,35.58Q64.29,12.95,100.67,0l22.24,46.9q-34,11.33-48.72,31.54T58.63,132.21h55Zm180,0H180V164.56q0-49.74,8.7-78T221,35.58Q244.65,12.95,280.63,0l22.24,46.9q-34,11.33-48.72,31.54t-15.57,53.77h55Z"}}class P extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkBlockquote",new D(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.register("websparkBlockquote",{isObject:!0,allowWhere:"$block"}),e.register("websparkBlockQuoteSvg",{isObject:!0,allowIn:"websparkBlockquote",allowContentOf:"$block",allowAttributes:["role","title","viewBox","xmlns"]}),e.register("websparkBlockQuoteContainer",{isLimit:!0,allowIn:"websparkBlockquote",allowContentOf:"$block"}),e.register("websparkBlockquoteParagraph",{isLimit:!0,allowIn:"websparkBlockQuoteContainer",allowContentOf:"$block"}),e.register("websparkBlockquoteCitation",{isLimit:!0,allowIn:"websparkBlockQuoteContainer",allowContentOf:"$text"}),e.register("websparkBlockquoteCitationName",{isLimit:!0,allowIn:"websparkBlockquoteCitation",allowContentOf:"$block"}),e.register("websparkBlockquoteCitationDescription",{isLimit:!0,allowIn:"websparkBlockquoteCitation",allowContentOf:"$block"})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({model:"websparkBlockquoteCitationName",view:{name:"cite",classes:"name"}}),e.for("dataDowncast").elementToElement({model:"websparkBlockquoteCitationName",view:{name:"cite",classes:"name"}}),e.for("editingDowncast").elementToElement({model:"websparkBlockquoteCitationName",view:(e,{writer:n})=>{const s=n.createEditableElement("cite",{class:"name"});return(0,t.toWidgetEditable)(s,n)}}),e.for("upcast").elementToElement({model:"websparkBlockquoteCitationDescription",view:{name:"cite",classes:"description"}}),e.for("dataDowncast").elementToElement({model:"websparkBlockquoteCitationDescription",view:{name:"cite",classes:"description"}}),e.for("editingDowncast").elementToElement({model:"websparkBlockquoteCitationDescription",view:(e,{writer:n})=>{const s=n.createEditableElement("cite",{class:"description"});return(0,t.toWidgetEditable)(s,n)}}),e.for("upcast").elementToElement({model:"websparkBlockquoteCitation",view:{name:"div",classes:"citation"}}),e.for("dataDowncast").elementToStructure({model:"websparkBlockquoteCitation",view:(e,t)=>{const{writer:n}=t,s=n.createContainerElement("div",{class:"citation-content"},[n.createSlot()]);return n.createContainerElement("div",{class:"citation"},[s])}}),e.for("editingDowncast").elementToStructure({model:"websparkBlockquoteCitation",view:(e,t)=>{const{writer:n}=t,s=n.createContainerElement("div",{class:"citation-content"},[n.createSlot()]);return n.createContainerElement("div",{class:"citation"},[s])}}),e.for("upcast").elementToElement({model:"websparkBlockquoteParagraph",view:{name:"p"}}),e.for("dataDowncast").elementToElement({model:"websparkBlockquoteParagraph",view:{name:"p"}}),e.for("editingDowncast").elementToElement({model:"websparkBlockquoteParagraph",view:(e,{writer:n})=>{const s=n.createEditableElement("p",{});return(0,t.toWidgetEditable)(s,n)}}),e.for("upcast").elementToElement({model:"websparkBlockQuoteContainer",view:{name:"blockquote"}}),e.for("dataDowncast").elementToElement({model:"websparkBlockQuoteContainer",view:{name:"blockquote"}}),e.for("editingDowncast").elementToElement({model:"websparkBlockQuoteContainer",view:(e,{writer:n})=>{const s=n.createEditableElement("blockquote",{});return(0,t.toWidgetEditable)(s,n)}}),e.for("upcast").elementToElement({view:{name:"div",attributes:{class:"open-quote"}},model:(e,{writer:t})=>t.createElement("websparkBlockQuoteSvg",{role:"presentation",title:"Open quote",viewBox:"0 0 302.87 245.82",xmlns:"http://www.w3.org/2000/svg"})}),e.for("upcast").elementToElement({view:{name:"svg",attributes:{role:"presentation",title:"Open quote"}},model:(e,{writer:t})=>t.createElement("websparkBlockQuoteSvg",{role:"presentation",title:"Open quote",viewBox:"0 0 302.87 245.82",xmlns:"http://www.w3.org/2000/svg"})}),e.for("downcast").elementToElement({model:"websparkBlockQuoteSvg",view:(e,{writer:t})=>t.createContainerElement("div",{class:"open-quote"})}),e.for("upcast").elementToElement({view:{name:"div",classes:["uds-blockquote","accent-maroon"]},model:(e,{writer:t})=>t.createElement("websparkBlockquote",{})}),e.for("dataDowncast").elementToElement({model:"websparkBlockquote",view:(e,{writer:t})=>t.createContainerElement("div",{class:"uds-blockquote accent-maroon"})}),e.for("editingDowncast").elementToElement({model:"websparkBlockquote",view:(e,{writer:n})=>{const s=n.createContainerElement("div",{class:"uds-blockquote accent-maroon"});return(0,t.toWidget)(s,n,{label:"BlockQuote"})}})}}class F extends i.View{DEFAULT_TEXT="";DEFAULT_STYLE="";DEFAULT_HEADING="";constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.textInputView=g(s("Content"),n),this.citationNameView=u(s("Citation Name"),n),this.citationDescriptionView=u(s("Citation Description"),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form","webspark-blockquote-dialog"],tabindex:"-1"},children:[c(this.textInputView),c(this.citationNameView),c(this.citationDescriptionView),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.textInputView.children[1],this.citationNameView.children[1],this.citationDescriptionView.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get text(){return this.textInputView.children[1].element.value.trim()}set text(e){this.textInputView.children[1].element.value=e.trim()}get citationName(){return this.citationNameView.children[1].element.value.trim()}set citationName(e){this.citationNameView.children[1].element.value=e.trim()}get citationDescription(){return this.citationDescriptionView.children[1].element.value.trim()}set citationDescription(e){this.citationDescriptionView.children[1].element.value=e.trim()}setValues(e){this.text=e?.text||this.DEFAULT_TEXT,this.citationName=e?.citationName||this.DEFAULT_STYLE,this.citationDescription=e?.citationDescription||this.DEFAULT_HEADING}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return t.includes("text")&&(this.textInputView.errorText=t),!1}return!0}resetFormStatus(){this.textInputView.errorText=null}}class O extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkBlockquote");this.form=new F((e.t,[e=>{}]),e.locale,t),e.ui.componentFactory.add("websparkBlockquote",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Blockquote"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72" version="1.1"><path d="" stroke="none" fill="#901c44" fill-rule="evenodd"/><path d="M 15.437 18.304 C 15.145 19.065, 15.040 23.020, 15.203 27.094 L 15.500 34.500 18.796 34.817 C 21.344 35.062, 21.979 35.516, 21.594 36.817 C 21.319 37.743, 20.810 39.698, 20.461 41.162 C 20.113 42.625, 18.516 44.991, 16.914 46.419 C 15.311 47.847, 14 49.436, 14 49.951 C 14 51.068, 18.003 58, 18.648 58 C 22.051 58, 31.451 48.835, 32.725 44.275 C 33.151 42.749, 33.500 36.100, 33.500 29.500 L 33.500 17.500 24.734 17.211 C 17.992 16.988, 15.845 17.241, 15.437 18.304 M 38.422 18.344 C 38.138 19.083, 38.040 23.020, 38.203 27.094 C 38.494 34.346, 38.557 34.507, 41.250 34.816 C 43.156 35.036, 44 35.706, 44 37.001 C 44 40.318, 42.003 44.446, 39.334 46.645 C 36.401 49.061, 36.565 52.006, 39.858 56.073 C 41.719 58.371, 41.776 58.377, 44.621 56.567 C 53.815 50.717, 56.009 46.158, 56.736 31.395 C 57.149 23.011, 56.964 19.661, 56.025 18.530 C 54.318 16.473, 39.201 16.313, 38.422 18.344" stroke="none" fill="#8c1c44" fill-rule="evenodd"/></svg>',tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.textInputView.children[1].element.select()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("insertWebsparkBlockquote",{text:t.text,citationName:t.citationName,citationDescription:t.citationDescription}),l())})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class M extends e.Plugin{static get requires(){return[P,O]}}function j(e,t,n,s,o=1){null!=t&&null!=o&&t>o?s.setAttribute(e,t,n):s.removeAttribute(e,n)}function z(e,t,n={}){const s=e.createElement("tableCell",n);return e.insertElement("paragraph",s),e.insert(s,t),s}function N(e,t){const n=t.parent.parent,s=parseInt(n.getAttribute("headingColumns")||"0"),{column:o}=e.getCellLocation(t);return!!s&&o<s}function W(){return e=>{e.on("element:table",((e,t,n)=>{const s=t.viewItem;if(!n.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:i,headingColumns:l}=function(e){let t,n=0;const s=[],o=[];let i;for(const l of Array.from(e.getChildren())){if("tbody"!==l.name&&"thead"!==l.name&&"tfoot"!==l.name)continue;"thead"!==l.name||i||(i=l);const e=Array.from(l.getChildren()).filter((e=>e.is("element","tr")));for(const r of e)if(i&&l===i||"tbody"===l.name&&Array.from(r.getChildren()).length&&Array.from(r.getChildren()).every((e=>e.is("element","th"))))n++,s.push(r);else{o.push(r);const e=q(r);(!t||e<t)&&(t=e)}}return{headingRows:n,headingColumns:t||0,rows:[...s,...o]}}(s),r={};l&&(r.headingColumns=l),i&&(r.headingRows=i);const a=n.writer.createElement("table",r);if(n.safeInsert(a,t.modelCursor)){if(n.consumable.consume(s,{name:!0}),o.forEach((e=>n.convertItem(e,n.writer.createPositionAt(a,"end")))),n.convertChildren(s,n.writer.createPositionAt(a,"end")),a.isEmpty){const e=n.writer.createElement("tableRow");n.writer.insert(e,n.writer.createPositionAt(a,"end")),z(n.writer,n.writer.createPositionAt(e,"end"))}n.updateConversionResult(a,t)}}))}}function U(e){return t=>{t.on(`element:${e}`,((e,t,{writer:n})=>{if(!t.modelRange)return;const s=t.modelRange.start.nodeAfter,o=n.createPositionAt(s,0);if(t.viewItem.isEmpty)return void n.insertElement("paragraph",o);const i=Array.from(s.getChildren());if(i.every((e=>e.is("element","$marker")))){const e=n.createElement("paragraph");n.insert(e,n.createPositionAt(s,0));for(const t of i)n.move(n.createRangeOn(t),n.createPositionAt(e,"end"))}}),{priority:"low"})}}function q(e){let t=0,n=0;const s=Array.from(e.getChildren()).filter((e=>"th"===e.name||"td"===e.name));for(;n<s.length&&"th"===s[n].name;){const e=s[n];t+=parseInt(e.getAttribute("colspan")||"1"),n++}return t}class G{constructor(e,t={}){this._jumpedToStartRow=!1,this._table=e,this._startRow=void 0!==t.row?t.row:t.startRow||0,this._endRow=void 0!==t.row?t.row:t.endRow,this._startColumn=void 0!==t.column?t.column:t.startColumn||0,this._endColumn=void 0!==t.column?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{const n=e.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const s=parseInt(n.getAttribute("colspan")||"1"),o=parseInt(n.getAttribute("rowspan")||"1");(s>1||o>1)&&this._recordSpans(n,o,s),this._shouldSkipSlot()||(t=this._formatOutValue(n)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(e,t=this._row,n=this._column){return{done:!1,value:new K(this,e,t,n)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,n=this._column<this._startColumn,s=void 0!==this._endColumn&&this._column>this._endColumn;return e||t||n||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,n){const s={cell:e,row:this._row,column:this._column};for(let e=this._row;e<this._row+t;e++)for(let t=this._column;t<this._column+n;t++)e==this._row&&t==this._column||this._markSpannedCell(e,t,s)}_markSpannedCell(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map);this._spannedCells.get(e).set(t,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce(((e,t)=>e+parseInt(t.getAttribute("colspan")||"1")),0)}}class K{constructor(e,t,n,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=n,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function Z(e,n){return(s,{writer:o})=>{const i=s.getAttribute("headingRows")||0,l=o.createContainerElement("table",null,[]),r=o.createContainerElement("figure",{class:"table"},l);i>0&&o.insert(o.createPositionAt(l,"end"),o.createContainerElement("thead",null,o.createSlot((e=>e.is("element","tableRow")&&e.index<i)))),i<e.getRows(s)&&o.insert(o.createPositionAt(l,"end"),o.createContainerElement("tbody",null,o.createSlot((e=>e.is("element","tableRow")&&e.index>=i))));for(const{positionOffset:e,filter:t}of n.additionalSlots)o.insert(o.createPositionAt(l,e),o.createSlot(t));return o.insert(o.createPositionAt(l,"after"),o.createSlot((e=>!e.is("element","tableRow")&&!n.additionalSlots.some((({filter:t})=>t(e)))))),n.asWidget?function(e,n){return n.setCustomProperty("table",!0,e),(0,t.toWidget)(e,n,{hasSelectionHandle:!0})}(r,o):r}}function $(e={}){return(n,{writer:s})=>{const o=n.parent,i=o.parent,l=i.getChildIndex(o),r=new G(i,{row:l}),a=i.getAttribute("headingRows")||0,c=i.getAttribute("headingColumns")||0;let d=null;for(const o of r)if(o.cell==n){const n=o.row<a||o.column<c?"th":"td";d=e.asWidget?(0,t.toWidgetEditable)(s.createEditableElement(n),s):s.createContainerElement(n);break}return d}}function Q(e={}){return(t,{writer:n})=>{if(!t.parent.is("element","tableCell"))return null;if(!Y(t))return null;if(e.asWidget)return n.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const e=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,e),e}}}function Y(e){return 1==e.parent.childCount&&!!e.getAttributeKeys().next().done}class X extends e.Command{refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema;this.isEnabled=function(e,t){const n=e.getFirstPosition().parent,s=n===n.root?n:n.parent;return t.checkChild(s,"table")}(t,n)}execute(e={}){const t=this.editor,n=t.model,s=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),i=t.config.get("table.defaultHeadings.columns");void 0===e.headingRows&&o&&(e.headingRows=o),void 0===e.headingColumns&&i&&(e.headingColumns=i),n.change((t=>{const o=s.createTable(t,e);n.insertObject(o,null,null,{findOptimalPosition:"auto"}),t.setSelection(t.createPositionAt(o.getNodeByPath([0,0,0]),0))}))}}class J extends e.Command{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,t=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),s="above"===this.order,o=n.getSelectionAffectedTableCells(t),i=n.getRowIndexes(o),l=s?i.first:i.last,r=o[0].findAncestor("table");n.insertRows(r,{at:s?l:l+1,copyStructureFromAbove:!s})}}class ee extends e.Command{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,t=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),s="left"===this.order,o=n.getSelectionAffectedTableCells(t),i=n.getColumnIndexes(o),l=s?i.first:i.last,r=o[0].findAncestor("table");n.insertColumns(r,{columns:1,at:s?l:l+1})}}class te extends e.Command{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=1===e.length}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];"horizontally"===this.direction?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}function ne(e,t,n){const{startRow:s,startColumn:o,endRow:i,endColumn:l}=t,r=n.createElement("table"),a=i-s+1;for(let e=0;e<a;e++)n.insertElement("tableRow",r,"end");const c=[...new G(e,{startRow:s,endRow:i,startColumn:o,endColumn:l,includeAllSlots:!0})];for(const{row:e,column:t,cell:a,isAnchor:d,cellAnchorRow:u,cellAnchorColumn:h}of c){const c=e-s,m=r.getChild(c);if(d){const s=n.cloneElement(a);n.append(s,m),re(s,e,t,i,l,n)}else(u<s||h<o)&&z(n,n.createPositionAt(m,"end"))}return function(e,t,n,s,o){const i=parseInt(t.getAttribute("headingRows")||"0");if(i>0){j("headingRows",i-n,e,o,0)}const l=parseInt(t.getAttribute("headingColumns")||"0");if(l>0){j("headingColumns",l-s,e,o,0)}}(r,e,s,o,n),r}function se(e,t,n=0){const s=[],o=new G(e,{startRow:n,endRow:t-1});for(const e of o){const{row:n,cellHeight:o}=e;n<t&&t<=n+o-1&&s.push(e)}return s}function oe(e,t,n){const s=e.parent,o=s.parent,i=s.index,l=t-i,r={},a=parseInt(e.getAttribute("rowspan"))-l;a>1&&(r.rowspan=a);const c=parseInt(e.getAttribute("colspan")||"1");c>1&&(r.colspan=c);const d=i+l,u=[...new G(o,{startRow:i,endRow:d,includeAllSlots:!0})];let h,m=null;for(const t of u){const{row:s,column:o,cell:i}=t;i===e&&void 0===h&&(h=o),void 0!==h&&h===o&&s===d&&(m=z(n,t.getPositionBefore(),r))}return j("rowspan",l,e,n),m}function ie(e,t){const n=[],s=new G(e);for(const e of s){const{column:s,cellWidth:o}=e;s<t&&t<=s+o-1&&n.push(e)}return n}function le(e,t,n,s){const o=n-t,i={},l=parseInt(e.getAttribute("colspan"))-o;l>1&&(i.colspan=l);const r=parseInt(e.getAttribute("rowspan")||"1");r>1&&(i.rowspan=r);const a=z(s,s.createPositionAfter(e),i);return j("colspan",o,e,s),a}function re(e,t,n,s,o,i){const l=parseInt(e.getAttribute("colspan")||"1"),r=parseInt(e.getAttribute("rowspan")||"1");if(n+l-1>o){j("colspan",o-n+1,e,i,1)}if(t+r-1>s){j("rowspan",s-t+1,e,i,1)}}function ae(e,t){const n=t.getColumns(e),s=new Array(n).fill(0);for(const{column:t}of new G(e))s[t]++;const o=s.reduce(((e,t,n)=>t?e:[...e,n]),[]);if(o.length>0){const n=o[o.length-1];return t.removeColumns(e,{at:n}),!0}return!1}function ce(e,t){const n=[],s=t.getRows(e);for(let t=0;t<s;t++){e.getChild(t).isEmpty&&n.push(t)}if(n.length>0){const s=n[n.length-1];return t.removeRows(e,{at:s}),!0}return!1}function de(e,t){ae(e,t)||ce(e,t)}function ue(e,t){const n=Array.from(new G(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(n.every((({cellHeight:e})=>1===e)))return t.lastRow;const s=n[0].cellHeight-1;return t.lastRow+s}function he(e,t){const n=Array.from(new G(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(n.every((({cellWidth:e})=>1===e)))return t.lastColumn;const s=n[0].cellWidth-1;return t.lastColumn+s}class me extends e.Command{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,n=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],s=this.value,o=this.direction;e.change((e=>{const t="right"==o||"down"==o,i=t?n:s,l=t?s:n,r=l.parent;!function(e,t,n){ge(e)||(ge(t)&&n.remove(n.createRangeIn(t)),n.move(n.createRangeIn(e),n.createPositionAt(t,"end")));n.remove(e)}(l,i,e);const a=this.isHorizontal?"colspan":"rowspan",c=parseInt(n.getAttribute(a)||"1"),d=parseInt(s.getAttribute(a)||"1");e.setAttribute(a,c+d,i),e.setSelection(e.createRangeIn(i));const u=this.editor.plugins.get("TableUtils");de(r.findAncestor("table"),u)}))}_getMergeableCell(){const e=this.editor.model.document,t=this.editor.plugins.get("TableUtils"),n=t.getTableCellsContainingSelection(e.selection)[0];if(!n)return;const s=this.isHorizontal?function(e,t,n){const s=e.parent,o=s.parent,i="right"==t?e.nextSibling:e.previousSibling,l=(o.getAttribute("headingColumns")||0)>0;if(!i)return;const r="right"==t?e:i,a="right"==t?i:e,{column:c}=n.getCellLocation(r),{column:d}=n.getCellLocation(a),u=parseInt(r.getAttribute("colspan")||"1"),h=N(n,r),m=N(n,a);if(l&&h!=m)return;return c+u===d?i:void 0}(n,this.direction,t):function(e,t,n){const s=e.parent,o=s.parent,i=o.getChildIndex(s);if("down"==t&&i===n.getRows(o)-1||"up"==t&&0===i)return null;const l=parseInt(e.getAttribute("rowspan")||"1"),r=o.getAttribute("headingRows")||0,a="down"==t&&i+l===r,c="up"==t&&i===r;if(r&&(a||c))return null;const d=parseInt(e.getAttribute("rowspan")||"1"),u="down"==t?i+d:i,h=[...new G(o,{endRow:u})],m=h.find((t=>t.cell===e)),g=m.column,p=h.find((({row:e,cellHeight:n,column:s})=>s===g&&("down"==t?e===u:u===e+n)));return p&&p.cell?p.cell:null}(n,this.direction,t);if(!s)return;const o=this.isHorizontal?"rowspan":"colspan",i=parseInt(n.getAttribute(o)||"1");return parseInt(s.getAttribute(o)||"1")===i?s:void 0}}function ge(e){const t=e.getChild(0);return 1==e.childCount&&t.is("element","paragraph")&&t.isEmpty}class pe extends e.Command{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const s=n.findAncestor("table"),o=e.getRows(s)-1,i=e.getRowIndexes(t),l=0===i.first&&i.last===o;this.isEnabled=!l}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(n),o=n[0],i=o.findAncestor("table"),l=t.getCellLocation(o).column;e.change((e=>{const n=s.last-s.first+1;t.removeRows(i,{at:s.first,rows:n});const o=function(e,t,n,s){const o=e.getChild(Math.min(t,s-1));let i=o.getChild(0),l=0;for(const e of o.getChildren()){if(l>n)return i;i=e,l+=parseInt(e.getAttribute("colspan")||"1")}return i}(i,s.first,l,t.getRows(i));e.setSelection(e.createPositionAt(o,0))}))}}class we extends e.Command{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),n=t[0];if(n){const s=n.findAncestor("table"),o=e.getColumns(s),{first:i,last:l}=e.getColumnIndexes(t);this.isEnabled=l-i<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,n]=function(e,t){const n=t.getSelectionAffectedTableCells(e),s=n[0],o=n.pop(),i=[s,o];return s.isBefore(o)?i:i.reverse()}(this.editor.model.document.selection,e),s=t.parent.parent,o=[...new G(s)],i={first:o.find((e=>e.cell===t)).column,last:o.find((e=>e.cell===n)).column},l=function(e,t,n,s){const o=parseInt(n.getAttribute("colspan")||"1");return o>1?n:t.previousSibling||n.nextSibling?n.nextSibling||t.previousSibling:s.first?e.reverse().find((({column:e})=>e<s.first)).cell:e.reverse().find((({column:e})=>e>s.last)).cell}(o,t,n,i);this.editor.model.change((t=>{const n=i.last-i.first+1;e.removeColumns(s,{at:i.first,columns:n}),t.setSelection(t.createPositionAt(l,0))}))}}class be extends e.Command{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every((e=>this._isInHeading(e,e.parent.parent)))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=t.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:i,last:l}=t.getRowIndexes(s),r=this.value?i:l+1,a=o.getAttribute("headingRows")||0;n.change((e=>{if(r){const t=se(o,r,r>a?a:0);for(const{cell:n}of t)oe(n,r,e)}j("headingRows",r,o,e,0)}))}_isInHeading(e,t){const n=parseInt(t.getAttribute("headingRows")||"0");return!!n&&e.parent.index<n}}class fe extends e.Command{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=n.length>0;this.isEnabled=s,this.value=s&&n.every((e=>N(t,e)))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=t.getSelectionAffectedTableCells(n.document.selection),o=s[0].findAncestor("table"),{first:i,last:l}=t.getColumnIndexes(s),r=this.value?i:l+1;n.change((e=>{if(r){const t=ie(o,r);for(const{cell:n,column:s}of t)le(n,s,r,e)}j("headingColumns",r,o,e,0)}))}}function ke(e){if(e.is("element","tableColumnGroup"))return e;const t=e.getChildren();return Array.from(t).find((e=>e.is("element","tableColumnGroup")))}function ve(e){const t=ke(e);return t?Array.from(t.getChildren()):[]}class Ce extends e.Plugin{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,n=t.parent,s=n.getChildIndex(t),o=new G(n,{row:s});for(const{cell:t,row:n,column:s}of o)if(t===e)return{row:n,column:s}}createTable(e,t){const n=e.createElement("table"),s=t.rows||2,o=t.columns||2;return ye(e,n,0,s,o),t.headingRows&&j("headingRows",Math.min(t.headingRows,s),n,e,0),t.headingColumns&&j("headingColumns",Math.min(t.headingColumns,o),n,e,0),n}insertRows(e,t={}){const n=this.editor.model,s=t.at||0,o=t.rows||1,i=void 0!==t.copyStructureFromAbove,l=t.copyStructureFromAbove?s-1:s,r=this.getRows(e),a=this.getColumns(e);if(s>r)throw new b.CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:t});n.change((t=>{const n=e.getAttribute("headingRows")||0;if(n>s&&j("headingRows",n+o,e,t,0),!i&&(0===s||s===r))return void ye(t,e,s,o,a);const c=i?Math.max(s,l):s,d=new G(e,{endRow:c}),u=new Array(a).fill(1);for(const{row:e,column:n,cellHeight:r,cellWidth:a,cell:c}of d){const d=e+r-1,h=e<=l&&l<=d;e<s&&s<=d?(t.setAttribute("rowspan",r+o,c),u[n]=-a):i&&h&&(u[n]=a)}for(let n=0;n<o;n++){const n=t.createElement("tableRow");t.insert(n,e,s);for(let e=0;e<u.length;e++){const s=u[e],o=t.createPositionAt(n,"end");s>0&&z(t,o,s>1?{colspan:s}:void 0),e+=Math.abs(s)-1}}}))}insertColumns(e,t={}){const n=this.editor.model,s=t.at||0,o=t.columns||1;n.change((t=>{const n=e.getAttribute("headingColumns");s<n&&t.setAttribute("headingColumns",n+o,e);const i=this.getColumns(e);if(0===s||i===s){for(const n of e.getChildren())n.is("element","tableRow")&&Te(o,t,t.createPositionAt(n,s?"end":0));return}const l=new G(e,{column:s,includeAllSlots:!0});for(const e of l){const{row:n,cell:i,cellAnchorColumn:r,cellAnchorRow:a,cellWidth:c,cellHeight:d}=e;if(r<s){t.setAttribute("colspan",c+o,i);const e=a+d-1;for(let t=n;t<=e;t++)l.skipRow(t)}else Te(o,t,e.getPositionBefore())}}))}removeRows(e,t){const n=this.editor.model,s=t.rows||1,o=this.getRows(e),i=t.at,l=i+s-1;if(l>o-1)throw new b.CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});n.change((t=>{const n={first:i,last:l},{cellsToMove:s,cellsToTrim:o}=function(e,{first:t,last:n}){const s=new Map,o=[];for(const{row:i,column:l,cellHeight:r,cell:a}of new G(e,{endRow:n})){const e=i+r-1;if(i>=t&&i<=n&&e>n){const e=r-(n-i+1);s.set(l,{cell:a,rowspan:e})}if(i<t&&e>=t){let s;s=e>=n?n-t+1:e-t+1,o.push({cell:a,rowspan:r-s})}}return{cellsToMove:s,cellsToTrim:o}}(e,n);if(s.size){!function(e,t,n,s){const o=new G(e,{includeAllSlots:!0,row:t}),i=[...o],l=e.getChild(t);let r;for(const{column:e,cell:t,isAnchor:o}of i)if(n.has(e)){const{cell:t,rowspan:o}=n.get(e),i=r?s.createPositionAfter(r):s.createPositionAt(l,0);s.move(s.createRangeOn(t),i),j("rowspan",o,t,s),r=t}else o&&(r=t)}(e,l+1,s,t)}for(let n=l;n>=i;n--)t.remove(e.getChild(n));for(const{rowspan:e,cell:n}of o)j("rowspan",e,n,t);!function(e,{first:t,last:n},s){const o=e.getAttribute("headingRows")||0;if(t<o){j("headingRows",n<o?o-(n-t+1):t,e,s,0)}}(e,n,t),ae(e,this)||ce(e,this)}))}removeColumns(e,t){const n=this.editor.model,s=t.at,o=t.columns||1,i=t.at+o-1;n.change((t=>{!function(e,t,n){const s=e.getAttribute("headingColumns")||0;if(s&&t.first<s){const o=Math.min(s-1,t.last)-t.first+1;n.setAttribute("headingColumns",s-o,e)}}(e,{first:s,last:i},t);const n=ve(e);for(let o=i;o>=s;o--){for(const{cell:n,column:s,cellWidth:i}of[...new G(e)])s<=o&&i>1&&s+i>o?j("colspan",i-1,n,t):s===o&&t.remove(n);if(n[o]){const e=0===o?n[1]:n[o-1],s=parseFloat(n[o].getAttribute("columnWidth")),i=parseFloat(e.getAttribute("columnWidth"));t.remove(n[o]),t.setAttribute("columnWidth",s+i+"%",e)}}ce(e,this)||ae(e,this)}))}splitCellVertically(e,t=2){const n=this.editor.model,s=e.parent.parent,o=parseInt(e.getAttribute("rowspan")||"1"),i=parseInt(e.getAttribute("colspan")||"1");n.change((n=>{if(i>1){const{newCellsSpan:s,updatedSpan:l}=_e(i,t);j("colspan",l,e,n);const r={};s>1&&(r.colspan=s),o>1&&(r.rowspan=o);Te(i>t?t-1:i-1,n,n.createPositionAfter(e),r)}if(i<t){const l=t-i,r=[...new G(s)],{column:a}=r.find((({cell:t})=>t===e)),c=r.filter((({cell:t,cellWidth:n,column:s})=>t!==e&&s===a||s<a&&s+n>a));for(const{cell:e,cellWidth:t}of c)n.setAttribute("colspan",t+l,e);const d={};o>1&&(d.rowspan=o),Te(l,n,n.createPositionAfter(e),d);const u=s.getAttribute("headingColumns")||0;u>a&&j("headingColumns",u+l,s,n)}}))}splitCellHorizontally(e,t=2){const n=this.editor.model,s=e.parent,o=s.parent,i=o.getChildIndex(s),l=parseInt(e.getAttribute("rowspan")||"1"),r=parseInt(e.getAttribute("colspan")||"1");n.change((n=>{if(l>1){const s=[...new G(o,{startRow:i,endRow:i+l-1,includeAllSlots:!0})],{newCellsSpan:a,updatedSpan:c}=_e(l,t);j("rowspan",c,e,n);const{column:d}=s.find((({cell:t})=>t===e)),u={};a>1&&(u.rowspan=a),r>1&&(u.colspan=r);for(const e of s){const{column:t,row:s}=e;s>=i+c&&t===d&&(s+i+c)%a==0&&Te(1,n,e.getPositionBefore(),u)}}if(l<t){const s=t-l,a=[...new G(o,{startRow:0,endRow:i})];for(const{cell:t,cellHeight:o,row:l}of a)if(t!==e&&l+o>i){const e=o+s;n.setAttribute("rowspan",e,t)}const c={};r>1&&(c.colspan=r),ye(n,o,i+1,s,1,c);const d=o.getAttribute("headingRows")||0;d>i&&j("headingRows",d+s,o,n)}}))}getColumns(e){return[...e.getChild(0).getChildren()].reduce(((e,t)=>e+parseInt(t.getAttribute("colspan")||"1")),0)}getRows(e){return Array.from(e.getChildren()).reduce(((e,t)=>t.is("element","tableRow")?e+1:e),0)}createTableWalker(e,t={}){return new G(e,t)}getSelectedTableCells(e){const t=[];for(const n of this.sortRanges(e.getRanges())){const e=n.getContainedElement();e&&e.is("element","tableCell")&&t.push(e)}return t}getTableCellsContainingSelection(e){const t=[];for(const n of e.getRanges()){const e=n.start.findAncestor("tableCell");e&&t.push(e)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map((e=>e.parent.index));return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),n=[...new G(t)].filter((t=>e.includes(t.cell))).map((e=>e.column));return this._getFirstLastIndexesObject(n)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,n=new Set;let s=0;for(const o of e){const{row:e,column:i}=this.getCellLocation(o),l=parseInt(o.getAttribute("rowspan"))||1,r=parseInt(o.getAttribute("colspan"))||1;t.add(e),n.add(i),l>1&&t.add(e+l-1),r>1&&n.add(i+r-1),s+=l*r}const o=function(e,t){const n=Array.from(e.values()),s=Array.from(t.values()),o=Math.max(...n),i=Math.min(...n),l=Math.max(...s),r=Math.min(...s);return(o-i+1)*(l-r+1)}(t,n);return o==s}sortRanges(e){return Array.from(e).sort(xe)}_getFirstLastIndexesObject(e){const t=e.sort(((e,t)=>e-t));return{first:t[0],last:t[t.length-1]}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),n=this.getRowIndexes(e),s=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,s))return!1;const o=this.getColumnIndexes(e),i=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,i)}_areIndexesInSameSection({first:e,last:t},n){return e<n===t<n}}function ye(e,t,n,s,o,i={}){for(let l=0;l<s;l++){const s=e.createElement("tableRow");e.insert(s,t,n),Te(o,e,e.createPositionAt(s,"end"),i)}}function Te(e,t,n,s={}){for(let o=0;o<e;o++)z(t,n,s)}function _e(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(e/t);return{newCellsSpan:n,updatedSpan:e-n*t+n}}function xe(e,t){const n=e.start,s=t.start;return n.isBefore(s)?-1:1}class Se extends e.Command{refresh(){const e=this.editor.plugins.get(Ce),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(Ce);e.change((n=>{const s=t.getSelectedTableCells(e.document.selection),o=s.shift(),{mergeWidth:i,mergeHeight:l}=function(e,t,n){let s=0,o=0;for(const e of t){const{row:t,column:i}=n.getCellLocation(e);s=Ve(e,i,s,"colspan"),o=Ve(e,t,o,"rowspan")}const{row:i,column:l}=n.getCellLocation(e),r=s-l,a=o-i;return{mergeWidth:r,mergeHeight:a}}(o,s,t);j("colspan",i,o,n),j("rowspan",l,o,n);for(const e of s)Ee(e,o,n);de(o.findAncestor("table"),t),n.setSelection(o,"in")}))}}function Ee(e,t,n){Ae(e)||(Ae(t)&&n.remove(n.createRangeIn(t)),n.move(n.createRangeIn(e),n.createPositionAt(t,"end"))),n.remove(e)}function Ae(e){const t=e.getChild(0);return 1==e.childCount&&t.is("element","paragraph")&&t.isEmpty}function Ve(e,t,n,s){const o=parseInt(e.getAttribute(s)||"1");return Math.max(n,t+o)}class Re extends e.Command{constructor(e){super(e),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(n),o=n[0].findAncestor("table"),i=[];for(let t=s.first;t<=s.last;t++)for(const n of o.getChild(t).getChildren())i.push(e.createRangeOn(n));e.change((e=>{e.setSelection(i)}))}}class Ie extends e.Command{constructor(e){super(e),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,n=e.getSelectionAffectedTableCells(t.document.selection),s=n[0],o=n.pop(),i=s.findAncestor("table"),l=e.getCellLocation(s),r=e.getCellLocation(o),a=Math.min(l.column,r.column),c=Math.max(l.column,r.column),d=[];for(const e of new G(i,{startColumn:a,endColumn:c}))d.push(t.createRangeOn(e.cell));t.change((e=>{e.setSelection(d)}))}}function Be(e){e.document.registerPostFixer((t=>function(e,t){const n=t.document.differ.getChanges();let s=!1;const o=new Set;for(const t of n){let n=null;"insert"==t.type&&"table"==t.name&&(n=t.position.nodeAfter),"insert"!=t.type&&"remove"!=t.type||"tableRow"!=t.name&&"tableCell"!=t.name||(n=t.position.findAncestor("table")),De(t)&&(n=t.range.start.findAncestor("table")),n&&!o.has(n)&&(s=Le(n,e)||s,s=He(n,e)||s,o.add(n))}return s}(t,e)))}function Le(e,t){let n=!1;const s=function(e){const t=parseInt(e.getAttribute("headingRows")||"0"),n=Array.from(e.getChildren()).reduce(((e,t)=>t.is("element","tableRow")?e+1:e),0),s=[];for(const{row:o,cell:i,cellHeight:l}of new G(e)){if(l<2)continue;const e=o<t?t:n;if(o+l>e){const t=e-o;s.push({cell:i,rowspan:t})}}return s}(e);if(s.length){n=!0;for(const e of s)j("rowspan",e.rowspan,e.cell,t,1)}return n}function He(e,t){let n=!1;const s=function(e){const t=new Array(e.childCount).fill(0);for(const{rowIndex:n}of new G(e,{includeAllSlots:!0}))t[n]++;return t}(e),o=[];for(const[t,n]of s.entries())!n&&e.getChild(t).is("element","tableRow")&&o.push(t);if(o.length){n=!0;for(const n of o.reverse())t.remove(e.getChild(n)),s.splice(n,1)}const i=s.filter(((t,n)=>e.getChild(n).is("element","tableRow"))),l=i[0];if(!i.every((e=>e===l))){const s=i.reduce(((e,t)=>t>e?t:e),0);for(const[o,l]of i.entries()){const i=s-l;if(i){for(let n=0;n<i;n++)z(t,t.createPositionAt(e.getChild(o),"end"));n=!0}}}return n}function De(e){if("attribute"!==e.type)return!1;const t=e.attributeKey;return"headingRows"===t||"colspan"===t||"rowspan"===t}function Pe(e){e.document.registerPostFixer((t=>function(e,t){const n=t.document.differ.getChanges();let s=!1;for(const t of n)"insert"==t.type&&"table"==t.name&&(s=Fe(t.position.nodeAfter,e)||s),"insert"==t.type&&"tableRow"==t.name&&(s=Oe(t.position.nodeAfter,e)||s),"insert"==t.type&&"tableCell"==t.name&&(s=Me(t.position.nodeAfter,e)||s),"remove"!=t.type&&"insert"!=t.type||!je(t)||(s=Me(t.position.parent,e)||s);return s}(t,e)))}function Fe(e,t){let n=!1;for(const s of e.getChildren())s.is("element","tableRow")&&(n=Oe(s,t)||n);return n}function Oe(e,t){let n=!1;for(const s of e.getChildren())n=Me(s,t)||n;return n}function Me(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;const n=Array.from(e.getChildren()).filter((e=>e.is("$text")));for(const e of n)t.wrap(t.createRangeOn(e),"paragraph");return!!n.length}function je(e){return!!e.position.parent.is("element","tableCell")&&("insert"==e.type&&"$text"==e.name||"remove"==e.type)}function ze(e,t){if(!e.is("element","paragraph"))return!1;const n=t.toViewElement(e);return!!n&&Y(e)!==n.is("element","span")}var Ne=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),We=n.n(Ne),Ue=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableediting.css"),qe={insert:"head",singleton:!1};We()(Ue.Z,qe);Ue.Z.locals;class Ge extends e.Plugin{static get pluginName(){return"TableEditing"}static get requires(){return[Ce]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,n=t.schema,s=e.conversion,o=e.plugins.get(Ce);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add((e=>{e.on("element:figure",((e,t,n)=>{if(!n.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=function(e){for(const t of e.getChildren())if(t.is("element","table"))return t}(t.viewItem);if(!s||!n.consumable.test(s,{name:!0}))return;n.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=n.convertItem(s,t.modelCursor),i=(0,b.first)(o.modelRange.getItems());i?(n.convertChildren(t.viewItem,n.writer.createPositionAt(i,"end")),n.updateConversionResult(i,t)):n.consumable.revert(t.viewItem,{name:!0,classes:"table"})}))})),s.for("upcast").add(W()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Z(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Z(o,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add((e=>{e.on("element:tr",((e,t)=>{t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop()}),{priority:"high"})})),s.for("downcast").elementToElement({model:"tableRow",view:(e,{writer:t})=>e.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(U("td")),s.for("upcast").add(U("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:$({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:$()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:Q({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:Q(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ke("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ke("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new X(e)),e.commands.add("insertTableRowAbove",new J(e,{order:"above"})),e.commands.add("insertTableRowBelow",new J(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new ee(e,{order:"left"})),e.commands.add("insertTableColumnRight",new ee(e,{order:"right"})),e.commands.add("removeTableRow",new pe(e)),e.commands.add("removeTableColumn",new we(e)),e.commands.add("splitTableCellVertically",new te(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new te(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Se(e)),e.commands.add("mergeTableCellRight",new me(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new me(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new me(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new me(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new fe(e)),e.commands.add("setTableRowHeader",new be(e)),e.commands.add("selectTableRow",new Re(e)),e.commands.add("selectTableColumn",new Ie(e)),Be(t),Pe(t),this.listenTo(t.document,"change:data",(()=>{!function(e,t){const n=e.document.differ;for(const e of n.getChanges()){let n,s=!1;if("attribute"==e.type){const t=e.range.start.nodeAfter;if(!t||!t.is("element","table"))continue;if("headingRows"!=e.attributeKey&&"headingColumns"!=e.attributeKey)continue;n=t,s="headingRows"==e.attributeKey}else"tableRow"!=e.name&&"tableCell"!=e.name||(n=e.position.findAncestor("table"),s="tableRow"==e.name);if(!n)continue;const o=n.getAttribute("headingRows")||0,i=n.getAttribute("headingColumns")||0,l=new G(n);for(const e of l){const n=e.row<o||e.column<i?"th":"td",l=t.mapper.toViewElement(e.cell);l&&l.is("element")&&l.name!=n&&t.reconvertItem(s?e.cell.parent:e.cell)}}}(t,e.editing),function(e,t){const n=e.document.differ,s=new Set;for(const e of n.getChanges()){const t="attribute"==e.type?e.range.start.parent:e.position.parent;t.is("element","tableCell")&&s.add(t)}for(const e of s.values()){const n=Array.from(e.getChildren()).filter((e=>ze(e,t.mapper)));for(const e of n)t.reconvertItem(e)}}(t,e.editing)}))}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Ke(e){return t=>{const n=parseInt(t.getAttribute(e));return Number.isNaN(n)||n<=0?null:n}}var Ze=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/inserttable.css"),$e={insert:"head",singleton:!1};We()(Ze.Z,$e);Ze.Z.locals;class Qe extends i.View{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new b.KeystrokeHandler,this.focusTracker=new b.FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",((e,t)=>`${t}  ${e}`)),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to((e=>{e.preventDefault()})),click:t.to((()=>{this.fire("execute")}))}}),this.on("boxover",((e,t)=>{const{row:n,column:s}=t.target.dataset;this.items.get(10*(parseInt(n,10)-1)+(parseInt(s,10)-1)).focus()})),this.focusTracker.on("change:focusedElement",((e,t,n)=>{if(!n)return;const{row:s,column:o}=n.dataset;this.set({rows:parseInt(s),columns:parseInt(o)})})),this.on("change:columns",(()=>this._highlightGridBoxes())),this.on("change:rows",(()=>this._highlightGridBoxes()))}render(){super.render(),(0,i.addKeyboardHandlingForGrid)({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map(((n,s)=>{const o=Math.floor(s/10)<e&&s%10<t;n.set("isOn",o)}))}_createGridButton(e,t,n,s){const o=new i.ButtonView(e);return o.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":n}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const n=Math.floor(t/10),s=t%10,o=`${n+1}  ${s+1}`;e.push(this._createGridButton(this.locale,n+1,s+1,o))}return this.createCollection(e)}}class Ye extends e.Plugin{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,n="ltr"===e.locale.contentLanguageDirection;e.ui.componentFactory.add("insertTable",(n=>{const s=e.commands.get("insertTable"),o=(0,i.createDropdown)(n);let l;return o.bind("isEnabled").to(s),o.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:t("Insert table"),tooltip:!0}),o.on("change:isOpen",(()=>{l||(l=new Qe(n),o.panelView.children.add(l),l.delegate("execute").to(o),o.on("execute",(()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()})))})),o})),e.ui.componentFactory.add("tableColumn",(e=>{const s=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',s,e)})),e.ui.componentFactory.add("tableRow",(e=>{const n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',n,e)})),e.ui.componentFactory.add("mergeTableCells",(e=>{const s=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',s,e)}))}_prepareDropdown(e,t,n,s){const o=this.editor,l=(0,i.createDropdown)(s),r=this._fillDropdownWithListOptions(l,n);return l.buttonView.set({label:e,icon:t,tooltip:!0}),l.bind("isEnabled").toMany(r,"isEnabled",((...e)=>e.some((e=>e)))),this.listenTo(l,"execute",(e=>{o.execute(e.source.commandName),e.source instanceof i.SwitchButtonView||o.editing.view.focus()})),l}_prepareMergeSplitButtonDropdown(e,t,n,s){const o=this.editor,l=(0,i.createDropdown)(s,i.SplitButtonView),r="mergeTableCells",a=o.commands.get(r),c=this._fillDropdownWithListOptions(l,n);return l.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),l.bind("isEnabled").toMany([a,...c],"isEnabled",((...e)=>e.some((e=>e)))),this.listenTo(l.buttonView,"execute",(()=>{o.execute(r),o.editing.view.focus()})),this.listenTo(l,"execute",(e=>{o.execute(e.source.commandName),o.editing.view.focus()})),l}_fillDropdownWithListOptions(e,t){const n=this.editor,s=[],o=new b.Collection;for(const e of t)Xe(e,n,s,o);return(0,i.addListToDropdown)(e,o),s}}function Xe(e,t,n,s){if("button"===e.type||"switchbutton"===e.type){const s=e.model=new i.Model(e.model),{commandName:o,bindIsOn:l}=e.model,r=t.commands.get(o);n.push(r),s.set({commandName:o}),s.bind("isEnabled").to(r),l&&s.bind("isOn").to(r,"value"),s.set({withText:!0})}s.add(e)}var Je=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableselection.css"),et={insert:"head",singleton:!1};We()(Je.Z,et);Je.Z.locals;class tt extends e.Plugin{static get pluginName(){return"TableSelection"}static get requires(){return[Ce,Ce]}init(){const e=this.editor,t=e.model,n=e.editing.view;this.listenTo(t,"deleteContent",((e,t)=>this._handleDeleteContent(e,t)),{priority:"high"}),this.listenTo(n.document,"insertText",((e,t)=>this._handleInsertTextEvent(e,t)),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(Ce),t=this.editor.model.document.selection,n=e.getSelectedTableCells(t);return 0==n.length?null:n}getSelectionAsFragment(){const e=this.editor.plugins.get(Ce),t=this.getSelectedTableCells();return t?this.editor.model.change((n=>{const s=n.createDocumentFragment(),{first:o,last:i}=e.getColumnIndexes(t),{first:l,last:r}=e.getRowIndexes(t),a=t[0].findAncestor("table");let c=r,d=i;if(e.isSelectionRectangular(t)){const e={firstColumn:o,lastColumn:i,firstRow:l,lastRow:r};c=ue(a,e),d=he(a,e)}const u=ne(a,{startRow:l,startColumn:o,endRow:c,endColumn:d},n);return n.insert(u,s,0),s})):null}setCellSelection(e,t){const n=this._getCellsToSelect(e,t);this.editor.model.change((e=>{e.setSelection(n.cells.map((t=>e.createRangeOn(t))),{backward:n.backward})}))}getFocusCell(){const e=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}getAnchorCell(){const e=this.editor.model.document.selection,t=(0,b.first)(e.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add((e=>e.on("selection",((e,n,s)=>{const o=s.writer;!function(e){for(const n of t)e.removeClass("ck-editor__editable_selected",n);t.clear()}(o);const i=this.getSelectedTableCells();if(!i)return;for(const e of i){const n=s.mapper.toViewElement(e);o.addClass("ck-editor__editable_selected",n),t.add(n)}const l=s.mapper.toViewElement(i[i.length-1]);o.setSelection(l,0)}),{priority:"lowest"})))}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",(()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change((n=>{const s=n.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(s);n.setSelection(o)}))}}))}_handleDeleteContent(e,t){const n=this.editor.plugins.get(Ce),s=t[0],o=t[1],i=this.editor.model,l=!o||"backward"==o.direction,r=n.getSelectedTableCells(s);r.length&&(e.stop(),i.change((e=>{const t=r[l?r.length-1:0];i.change((e=>{for(const t of r)i.deleteContent(e.createSelection(t,"in"))}));const n=i.schema.getNearestSelectionRange(e.createPositionAt(t,0));s.is("documentSelection")?e.setSelection(n):s.setTo(n)})))}_handleInsertTextEvent(e,t){const n=this.editor,s=this.getSelectedTableCells();if(!s)return;const o=n.editing.view,i=n.editing.mapper,l=s.map((e=>o.createRangeOn(i.toViewElement(e))));t.selection=o.createSelection(l)}_getCellsToSelect(e,t){const n=this.editor.plugins.get("TableUtils"),s=n.getCellLocation(e),o=n.getCellLocation(t),i=Math.min(s.row,o.row),l=Math.max(s.row,o.row),r=Math.min(s.column,o.column),a=Math.max(s.column,o.column),c=new Array(l-i+1).fill(null).map((()=>[])),d={startRow:i,endRow:l,startColumn:r,endColumn:a};for(const{row:t,cell:n}of new G(e.findAncestor("table"),d))c[t-i].push(n);const u=o.row<s.row,h=o.column<s.column;return u&&c.reverse(),h&&c.forEach((e=>e.reverse())),{cells:c.flat(),backward:u||h}}}class nt extends e.Plugin{static get pluginName(){return"TableClipboard"}static get requires(){return[tt,Ce]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",((e,t)=>this._onCopyCut(e,t))),this.listenTo(t,"cut",((e,t)=>this._onCopyCut(e,t))),this.listenTo(e.model,"insertContent",((e,[t,n])=>this._onInsertContent(e,t,n)),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const n=this.editor.plugins.get(tt);if(!n.getSelectedTableCells())return;if("cut"==e.name&&!this.editor.model.canEditAt(this.editor.model.document.selection))return;t.preventDefault(),e.stop();const s=this.editor.data,o=this.editor.editing.view.document,i=s.toView(n.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:i,method:e.name})}_onInsertContent(e,t,n){if(n&&!n.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(Ce);let i=this.getTableIfOnlyTableInContent(t,s);if(!i)return;const l=o.getSelectionAffectedTableCells(s.document.selection);l.length?(e.stop(),s.change((e=>{const t={width:o.getColumns(i),height:o.getRows(i)},n=function(e,t,n,s){const o=e[0].findAncestor("table"),i=s.getColumnIndexes(e),l=s.getRowIndexes(e),r={firstColumn:i.first,lastColumn:i.last,firstRow:l.first,lastRow:l.last},a=1===e.length;a&&(r.lastRow+=t.height-1,r.lastColumn+=t.width-1,function(e,t,n,s){const o=s.getColumns(e),i=s.getRows(e);n>o&&s.insertColumns(e,{at:o,columns:n-o});t>i&&s.insertRows(e,{at:i,rows:t-i})}(o,r.lastRow+1,r.lastColumn+1,s));a||!s.isSelectionRectangular(e)?function(e,t,n){const{firstRow:s,lastRow:o,firstColumn:i,lastColumn:l}=t,r={first:s,last:o},a={first:i,last:l};ot(e,i,r,n),ot(e,l+1,r,n),st(e,s,a,n),st(e,o+1,a,n,s)}(o,r,n):(r.lastRow=ue(o,r),r.lastColumn=he(o,r));return r}(l,t,e,o),s=n.lastRow-n.firstRow+1,r=n.lastColumn-n.firstColumn+1,a={startRow:0,startColumn:0,endRow:Math.min(s,t.height)-1,endColumn:Math.min(r,t.width)-1};i=ne(i,a,e);const c=l[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(i,t,c,n,e);if(this.editor.plugins.get("TableSelection").isEnabled){const t=o.sortRanges(d.map((t=>e.createRangeOn(t))));e.setSelection(t)}else e.setSelection(d[0],0)}))):de(i,o)}_replaceSelectedCellsWithPasted(e,t,n,s,o){const{width:i,height:l}=t,r=function(e,t,n){const s=new Array(n).fill(null).map((()=>new Array(t).fill(null)));for(const{column:t,row:n,cell:o}of new G(e))s[n][t]=o;return s}(e,i,l),a=[...new G(n,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],c=[];let d;for(const e of a){const{row:t,column:n}=e;n===s.firstColumn&&(d=e.getPositionBefore());const a=t-s.firstRow,u=n-s.firstColumn,h=r[a%l][u%i],m=h?o.cloneElement(h):null,g=this._replaceTableSlotCell(e,m,d,o);g&&(re(g,t,n,s.lastRow,s.lastColumn,o),c.push(g),d=o.createPositionAfter(g))}const u=parseInt(n.getAttribute("headingRows")||"0"),h=parseInt(n.getAttribute("headingColumns")||"0"),m=s.firstRow<u&&u<=s.lastRow,g=s.firstColumn<h&&h<=s.lastColumn;if(m){const e=st(n,u,{first:s.firstColumn,last:s.lastColumn},o,s.firstRow);c.push(...e)}if(g){const e=ot(n,h,{first:s.firstRow,last:s.lastRow},o);c.push(...e)}return c}_replaceTableSlotCell(e,t,n,s){const{cell:o,isAnchor:i}=e;return i&&s.remove(o),t?(s.insert(t,n),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);const n=t.createRangeIn(e);for(const e of n.getItems())if(e.is("element","table")){const s=t.createRange(n.start,t.createPositionBefore(e));if(t.hasContent(s,{ignoreWhitespaces:!0}))return null;const o=t.createRange(t.createPositionAfter(e),n.end);return t.hasContent(o,{ignoreWhitespaces:!0})?null:e}return null}}function st(e,t,n,s,o=0){if(t<1)return;return se(e,t,o).filter((({column:e,cellWidth:t})=>it(e,t,n))).map((({cell:e})=>oe(e,t,s)))}function ot(e,t,n,s){if(t<1)return;return ie(e,t).filter((({row:e,cellHeight:t})=>it(e,t,n))).map((({cell:e,column:n})=>le(e,n,t,s)))}function it(e,t,n){const s=e+t-1,{first:o,last:i}=n;return e>=o&&e<=i||e<o&&s>=o}class lt extends e.Plugin{static get pluginName(){return"TableKeyboard"}static get requires(){return[tt,Ce]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"arrowKey",((...e)=>this._onArrowKey(...e)),{context:"table"}),this.listenTo(e,"tab",((...e)=>this._handleTabOnSelectedTable(...e)),{context:"figure"}),this.listenTo(e,"tab",((...e)=>this._handleTab(...e)),{context:["th","td"]})}_handleTabOnSelectedTable(e,t){const n=this.editor,s=n.model.document.selection.getSelectedElement();s&&s.is("element","table")&&(t.preventDefault(),t.stopPropagation(),e.stop(),n.model.change((e=>{e.setSelection(e.createRangeIn(s.getChild(0).getChild(0)))})))}_handleTab(e,t){const n=this.editor,s=this.editor.plugins.get(Ce),o=this.editor.plugins.get("TableSelection"),i=n.model.document.selection,l=!t.shiftKey;let r=s.getTableCellsContainingSelection(i)[0];if(r||(r=o.getFocusCell()),!r)return;t.preventDefault(),t.stopPropagation(),e.stop();const a=r.parent,c=a.parent,d=c.getChildIndex(a),u=a.getChildIndex(r),h=0===u;if(!l&&h&&0===d)return void n.model.change((e=>{e.setSelection(e.createRangeOn(c))}));const m=u===a.childCount-1,g=d===s.getRows(c)-1;if(l&&g&&m&&(n.execute("insertTableRowBelow"),d===s.getRows(c)-1))return void n.model.change((e=>{e.setSelection(e.createRangeOn(c))}));let p;if(l&&m){const e=c.getChild(d+1);p=e.getChild(0)}else if(!l&&h){const e=c.getChild(d-1);p=e.getChild(e.childCount-1)}else p=a.getChild(u+(l?1:-1));n.model.change((e=>{e.setSelection(e.createRangeIn(p))}))}_onArrowKey(e,t){const n=this.editor,s=t.keyCode,o=(0,b.getLocalizedArrowKeyCodeDirection)(s,n.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const n=this.editor.plugins.get(Ce),s=this.editor.plugins.get("TableSelection"),o=this.editor.model,i=o.document.selection,l=["right","down"].includes(e),r=n.getSelectedTableCells(i);if(r.length){let n;return n=t?s.getFocusCell():l?r[r.length-1]:r[0],this._navigateFromCellInDirection(n,e,t),!0}const a=i.focus.findAncestor("tableCell");if(!a)return!1;if(!i.isCollapsed)if(t){if(i.isBackward==l&&!i.containsEntireContent(a))return!1}else{const e=i.getSelectedElement();if(!e||!o.schema.isObject(e))return!1}return!!this._isSelectionAtCellEdge(i,a,l)&&(this._navigateFromCellInDirection(a,e,t),!0)}_isSelectionAtCellEdge(e,t,n){const s=this.editor.model,o=this.editor.model.schema,i=n?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(i).is("element","tableCell")){return s.createPositionAt(t,n?"end":0).isTouching(i)}const l=s.createSelection(i);return s.modifySelection(l,{direction:n?"forward":"backward"}),i.isEqual(l.focus)}_navigateFromCellInDirection(e,t,n=!1){const s=this.editor.model,o=e.findAncestor("table"),i=[...new G(o,{includeAllSlots:!0})],{row:l,column:r}=i[i.length-1],a=i.find((({cell:t})=>t==e));let{row:c,column:d}=a;switch(t){case"left":d--;break;case"up":c--;break;case"right":d+=a.cellWidth;break;case"down":c+=a.cellHeight}if(c<0||c>l||d<0&&c<=0||d>r&&c>=l)return void s.change((e=>{e.setSelection(e.createRangeOn(o))}));d<0?(d=n?0:r,c--):d>r&&(d=n?r:0,c++);const u=i.find((e=>e.row==c&&e.column==d)).cell,h=["right","down"].includes(t),m=this.editor.plugins.get("TableSelection");if(n&&m.isEnabled){const t=m.getAnchorCell()||e;m.setCellSelection(t,u)}else{const e=s.createPositionAt(u,h?0:"end");s.change((t=>{t.setSelection(e)}))}}}var rt=n("ckeditor5/src/engine.js");class at extends rt.DomEventObserver{constructor(){super(...arguments),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}class ct extends e.Plugin{static get pluginName(){return"TableMouse"}static get requires(){return[tt,Ce]}init(){this.editor.editing.view.addObserver(at),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(Ce);let n=!1;const s=e.plugins.get(tt);this.listenTo(e.editing.view.document,"mousedown",((o,i)=>{const l=e.model.document.selection;if(!this.isEnabled||!s.isEnabled)return;if(!i.domEvent.shiftKey)return;const r=s.getAnchorCell()||t.getTableCellsContainingSelection(l)[0];if(!r)return;const a=this._getModelTableCellFromDomEvent(i);a&&dt(r,a)&&(n=!0,s.setCellSelection(r,a),i.preventDefault())})),this.listenTo(e.editing.view.document,"mouseup",(()=>{n=!1})),this.listenTo(e.editing.view.document,"selectionChange",(e=>{n&&e.stop()}),{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,n,s=!1,o=!1;const i=e.plugins.get(tt);this.listenTo(e.editing.view.document,"mousedown",((e,n)=>{this.isEnabled&&i.isEnabled&&(n.domEvent.shiftKey||n.domEvent.ctrlKey||n.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(n)))})),this.listenTo(e.editing.view.document,"mousemove",((e,l)=>{if(!l.domEvent.buttons)return;if(!t)return;const r=this._getModelTableCellFromDomEvent(l);r&&dt(t,r)&&(n=r,s||n==t||(s=!0)),s&&(o=!0,i.setCellSelection(t,n),l.preventDefault())})),this.listenTo(e.editing.view.document,"mouseup",(()=>{s=!1,o=!1,t=null,n=null})),this.listenTo(e.editing.view.document,"selectionChange",(e=>{o&&e.stop()}),{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,n=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function dt(e,t){return e.parent.parent==t.parent.parent}var ut=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/table.css"),ht={insert:"head",singleton:!1};We()(ut.Z,ht);ut.Z.locals;class mt extends e.Plugin{static get requires(){return[Ge,Ye,tt,ct,lt,nt,t.Widget]}static get pluginName(){return"Table"}}class gt extends e.Plugin{static get pluginName(){return"PlainTableOutput"}static get requires(){return[mt]}init(){const e=this.editor;e.conversion.for("dataDowncast").elementToStructure({model:"table",view:pt,converterPriority:"high"}),e.plugins.has("TableCaption")&&e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(e,{writer:t})=>{if("table"===e.parent.name)return t.createContainerElement("caption")},converterPriority:"high"}),e.plugins.has("TableProperties")&&function(e){const t={"border-width":"tableBorderWidth","border-color":"tableBorderColor","border-style":"tableBorderStyle","background-color":"tableBackgroundColor"};for(const[n,s]of Object.entries(t))e.conversion.for("dataDowncast").add((e=>e.on(`attribute:${s}:table`,((e,t,s)=>{const{item:o,attributeNewValue:i}=t,{mapper:l,writer:r}=s;if(!s.consumable.consume(o,e.name))return;const a=l.toViewElement(o);i?r.setStyle(n,i,a):r.removeStyle(n,a)}),{priority:"high"})))}(e)}}function pt(e,{writer:t}){const n=e.getAttribute("headingRows")||0,s=t.createSlot((e=>e.is("element","tableRow")&&e.index<n)),o=t.createSlot((e=>e.is("element","tableRow")&&e.index>=n)),i=t.createSlot((e=>!e.is("element","tableRow"))),l=t.createContainerElement("thead",null,s),r=t.createContainerElement("tbody",null,o),a=[];return n&&a.push(l),n<e.childCount&&a.push(r),t.createContainerElement("table",null,[i,...a])}function wt(e){const t=e.getSelectedElement();return t&&ft(t)?t:null}function bt(e){const t=e.getFirstPosition();if(!t)return null;let n=t.parent;for(;n;){if(n.is("element")&&ft(n))return n;n=n.parent}return null}function ft(e){return!!e.getCustomProperty("table")&&(0,t.isWidget)(e)}class kt extends e.Plugin{static get requires(){return[t.WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,n=e.t,s=e.plugins.get(t.WidgetToolbarRepository),o=e.config.get("table.contentToolbar"),i=e.config.get("table.tableToolbar");o&&s.register("tableContent",{ariaLabel:n("Table toolbar"),items:o,getRelatedElement:bt}),i&&s.register("table",{ariaLabel:n("Table toolbar"),items:i,getRelatedElement:wt})}}var vt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/colorinput.css"),Ct={insert:"head",singleton:!1};We()(vt.Z,Ct);vt.Z.locals;const yt=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];var Tt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/formrow.css"),_t={insert:"head",singleton:!1};We()(Tt.Z,_t);Tt.Z.locals;var xt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/form.css"),St={insert:"head",singleton:!1};We()(xt.Z,St);xt.Z.locals;var Et=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableform.css"),At={insert:"head",singleton:!1};We()(Et.Z,At);Et.Z.locals;var Vt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecellproperties.css"),Rt={insert:"head",singleton:!1};We()(Vt.Z,Rt);Vt.Z.locals,e.icons.alignLeft,e.icons.alignCenter,e.icons.alignRight,e.icons.alignJustify,e.icons.alignTop,e.icons.alignMiddle,e.icons.alignBottom;const It=i.BalloonPanelView.defaultPositions,Bt=[It.northArrowSouth,It.northArrowSouthWest,It.northArrowSouthEast,It.southArrowNorth,It.southArrowNorthWest,It.southArrowNorthEast,It.viewportStickyNorth];function Lt(e,t){const n=e.plugins.get("ContextualBalloon");if(bt(e.editing.view.document.selection)){let s;s="cell"===t?Ht(e):function(e){const t=e.model.document.selection.getFirstPosition(),n=t.findAncestor("table"),s=e.editing.mapper.toViewElement(n);return{target:e.editing.view.domConverter.mapViewToDom(s),positions:Bt}}(e),n.updatePosition(s)}}function Ht(e){const t=e.editing.mapper,n=e.editing.view.domConverter,s=e.model.document.selection;if(s.rangeCount>1)return{target:()=>function(e,t){const n=t.editing.mapper,s=t.editing.view.domConverter,o=Array.from(e).map((e=>{const t=Dt(e.start),o=n.toViewElement(t);return new b.Rect(s.mapViewToDom(o))}));return b.Rect.getBoundingRect(o)}(s.getRanges(),e),positions:Bt};const o=Dt(s.getFirstPosition()),i=t.toViewElement(o);return{target:n.mapViewToDom(i),positions:Bt}}function Dt(e){return e.nodeAfter&&e.nodeAfter.is("element","tableCell")?e.nodeAfter:e.findAncestor("tableCell")}class Pt extends e.Command{constructor(e,t,n){super(e),this.attributeName=t,this._defaultValue=n}refresh(){const e=this.editor,t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!t.length,this.value=this._getSingleValue(t)}execute(e={}){const{value:t,batch:n}=e,s=this.editor.model,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),i=this._getValueToSet(t);s.enqueueChange(n,(e=>{i?o.forEach((t=>e.setAttribute(this.attributeName,i,t))):o.forEach((t=>e.removeAttribute(this.attributeName,t)))}))}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);return t!==this._defaultValue?t:void 0}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every((e=>this._getAttribute(e)===t))?t:void 0}}var Ft=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tableproperties.css"),Ot={insert:"head",singleton:!1};We()(Ft.Z,Ot);Ft.Z.locals,e.icons.objectLeft,e.icons.objectCenter,e.icons.objectRight;function Mt(e){e.document.registerPostFixer((t=>function(e,t){const n=t.document.differ.getChanges();let s=!1;for(const t of n){if("insert"!=t.type)continue;const n=t.position.parent;if(n.is("element","table")||"table"==t.name){const o="table"==t.name?t.position.nodeAfter:n,i=Array.from(o.getChildren()).filter((e=>e.is("element","caption"))),l=i.shift();if(!l)continue;for(const t of i)e.move(e.createRangeIn(t),l,"end"),e.remove(t);l.nextSibling&&(e.move(e.createRangeOn(l),o,"end"),s=!0),s=!!i.length||s}}return s}(t,e)))}function jt(e){return!!e&&e.is("element","table")}function zt(e){for(const t of e.getChildren())if(t.is("element","caption"))return t;return null}function Nt(e){const t=e.parent;return"figcaption"==e.name&&t&&t.is("element","figure")&&t.hasClass("table")||"caption"==e.name&&t&&t.is("element","table")?{name:!0}:null}function Wt(e){const t=e.getSelectedElement();return t&&t.is("element","table")?t:e.getFirstPosition().findAncestor("table")}class Ut extends e.Command{refresh(){const e=Wt(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?this.value=!!zt(e):this.value=!1}execute({focusCaptionOnShow:e=!1}={}){this.editor.model.change((t=>{this.value?this._hideTableCaption(t):this._showTableCaption(t,e)}))}_showTableCaption(e,t){const n=this.editor.model,s=Wt(n.document.selection),o=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||e.createElement("caption");n.insertContent(o,s,"end"),t&&e.setSelection(o,"in")}_hideTableCaption(e){const t=this.editor.model,n=Wt(t.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),o=zt(n);s._saveCaption(n,o),t.deleteContent(e.createSelection(o,"on"))}}class qt extends e.Plugin{static get pluginName(){return"TableCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,n=e.model.schema,s=e.editing.view,o=e.t;n.isRegistered("caption")?n.extend("caption",{allowIn:"table"}):n.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new Ut(this.editor)),e.conversion.for("upcast").elementToElement({view:Nt,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(e,{writer:t})=>jt(e.parent)?t.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(e,{writer:n})=>{if(!jt(e.parent))return null;const i=n.createEditableElement("figcaption");return n.setCustomProperty("tableCaption",!0,i),i.placeholder=o("Enter table caption"),(0,rt.enablePlaceholder)({view:s,element:i,keepOnFocus:!0}),(0,t.toWidgetEditable)(i,n)}}),Mt(e.model)}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?rt.Element.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}class Gt extends e.Plugin{static get pluginName(){return"TableCaptionUI"}init(){const t=this.editor,n=t.editing.view,s=t.t;t.ui.componentFactory.add("toggleTableCaption",(o=>{const l=t.commands.get("toggleTableCaption"),r=new i.ButtonView(o);return r.set({icon:e.icons.caption,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(l,"value","isEnabled"),r.bind("label").to(l,"value",(e=>s(e?"Toggle caption off":"Toggle caption on"))),this.listenTo(r,"execute",(()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),l.value){const e=function(e){const t=Wt(e);return t?zt(t):null}(t.model.document.selection),s=t.editing.mapper.toViewElement(e);if(!s)return;n.scrollToTheSelection(),n.change((e=>{e.addClass("table__caption_highlighted",s)}))}t.editing.view.focus()})),r}))}}var Kt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecaption.css"),Zt={insert:"head",singleton:!1};We()(Kt.Z,Zt);Kt.Z.locals;class $t extends e.Plugin{static get pluginName(){return"TableCaption"}static get requires(){return[qt,Gt]}}var Qt=n("./node_modules/css-loader/dist/cjs.js!./node_modules/@ckeditor/ckeditor5-table/theme/tablecolumnresize.css"),Yt={insert:"head",singleton:!1};We()(Qt.Z,Yt);Qt.Z.locals;class Xt extends i.View{constructor(t,n){super(t);const s=t.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.classSelect=d(s("Cell WS properties"),this._getPropertiesOptions(s),t),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",t),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",t),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form"],tabindex:"-1"},children:[c(this.classSelect),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}_getPropertiesOptions(e){return[{value:"td",title:e("Data")},{value:"th",title:e("Header")},{value:"indent",title:e("Padded header")},{value:"normal",title:e("Normal text header")}]}render(){super.render(),(0,i.submitHandler)({view:this});[this.classSelect.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get classselect(){return this.classSelect.children[1].value}set classselect(e){this.classSelect.children[1].value=e}setValues(e){this.classselect=e?.classselect}isValid(){return!0}}const Jt={tableCellWsClass:"tableCellWsClass"};class en extends e.Plugin{static get requires(){return[i.ContextualBalloon]}static get pluginName(){return"TableCellWsPropertiesUI"}constructor(e){super(e),e.config.define("table.tableCellWsProperties",{borderColors:yt,backgroundColors:yt})}init(){const e=this.editor,t=e.t;this._balloon=e.plugins.get(i.ContextualBalloon),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellWsProperties",(n=>{const s=new i.ButtonView(n);s.set({label:t("Cell Ws properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',tooltip:!0}),this.listenTo(s,"execute",(()=>this._showView()));const o=Object.values(Jt).map((t=>e.commands.get(t)));return s.bind("isEnabled").toMany(o,"isEnabled",((...e)=>e.some((e=>e)))),s}))}_createPropertiesView(){const e=this.editor,t=(e.config.get("table.tableCellWsProperties"),new Xt(e.locale,{}));e.t;return this.listenTo(t,"submit",(()=>{this.editor.execute("tableCellWsClass",{value:t.classselect}),this._hideView()})),this.listenTo(t,"cancel",(()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()})),t.keystrokes.set("Esc",((e,t)=>{this._hideView(),t()})),(0,i.clickOutsideHandler)({emitter:t,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()}),t}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",(()=>{this._updateView()}));let t=(0,b.first)(this.editor.model.document.selection.getSelectedBlocks());t&&t.parent&&(t=t.parent,this.view.classselect=t.getAttribute("cellType")),this._balloon.add({view:this.view,position:Ht(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor;bt(e.editing.view.document.selection)?this._isViewVisible&&Lt(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}}class tn extends Pt{constructor(e){super(e)}refresh(){let e=(0,b.first)(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=e,e&&e.parent&&(e=e.parent,this.value=Object.fromEntries(e.getAttributes()))}execute({value:e}){const{model:t}=this.editor;t.change((t=>{let n=(0,b.first)(this.editor.model.document.selection.getSelectedBlocks());n&&n.parent&&(n=n.parent,t.setAttribute("cellType",e,n))}))}}class nn extends e.Plugin{static get pluginName(){return"TableCellWsPropertiesEditing"}static get requires(){return[Ge]}init(){const e=this.editor,t=e.conversion;e.commands.add("tableCellWsClass",new tn(e)),function(e){e.for("upcast").elementToElement({view:{name:/^(td|th)$/},model:(e,{writer:t})=>{const n=Array.from(e._classes);return n.includes("normal")?t.createElement("tableCell",{cellType:"normal"}):n.includes("indent")?t.createElement("tableCell",{cellType:"indent"}):t.createElement("tableCell",{cellType:e.name})},converterPriority:"high"}),e.for("downcast").elementToElement({model:{name:"tableCell",attributes:["cellType"]},view:(e,{writer:t})=>{switch(e.getAttribute("cellType")){case"th":return t.createEditableElement("th",{contenteditable:"true",class:"ck-editor__editable ck-editor__nested-editable",role:"textbox"},[]);case"td":return t.createEditableElement("td",{contenteditable:"true",class:"ck-editor__editable ck-editor__nested-editable",role:"textbox"},[]);case"indent":case"normal":return t.createEditableElement("th",{contenteditable:"true",class:"ck-editor__editable ck-editor__nested-editable "+e.getAttribute("cellType"),role:"textbox"},[])}},converterPriority:"high"})}(t)}}class sn extends e.Plugin{static get pluginName(){return"TableCellWsProperties"}static get requires(){return[nn,en]}}class on extends e.Command{execute({rows:e,cols:t,headers:n,tabletype:s,caption:o}){const{model:i}=this.editor,l=this.editor.plugins.get("TableUtils"),r="both"===n||"row"===n?1:0,a="both"===n||"column"===n?1:0;i.change((n=>{const c=l.createTable(n,{rows:e,columns:t,headingRows:r,headingColumns:a});i.insertObject(c,null,null,{findOptimalPosition:"auto"}),n.setSelection(n.createPositionAt(c.getNodeByPath([0]),0));const d=n.createRange(n.createPositionBefore(c),n.createPositionAfter(c)),u=n.createElement("websparkTable",{type:s});if(n.wrap(d,u),n.append(c,u),i.insertContent(u),o?.length){const e=n.createElement("caption");n.insertText(o,e,"end");const t=function(e){const t=e.getSelectedElement();if(t&&t.is("element","table"))return t;return e.getFirstPosition().findAncestor("table")}(i.document.selection);i.insertContent(e,t,"end")}}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=e.schema.findAllowedParent(t.getFirstPosition(),"websparkTable");this.isEnabled=null!==n}}class ln extends e.Plugin{static get requires(){return[mt,Ce,kt,gt,$t,tt,nt,ct,lt,t.Widget,sn]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkTable",new on(this.editor))}_defineSchema(){this.editor.model.schema.register("websparkTable",{isObject:!0,allowWhere:"$block",allowChildren:["table"],allowAttributes:["type"]})}_defineConverters(){const{conversion:e}=this.editor;e.for("upcast").elementToElement({view:{name:"div",classes:["uds-table"],attribute:{type:!0}},model:(e,{writer:t})=>{const n=e.getAttribute("class").includes("-fixed")?"fixed":"default";return t.createElement("websparkTable",{type:n})}}),e.for("dataDowncast").elementToElement({model:"websparkTable",view:(e,{writer:t})=>{let n="uds-table";return"fixed"===e.getAttribute("type")&&(n+=" uds-table-fixed"),t.createContainerElement("div",{class:n})}}),e.for("editingDowncast").elementToElement({model:"websparkTable",view:(e,{writer:n})=>{const s=n.createContainerElement("div");return(0,t.toWidget)(s,n,{label:"Webspark Table"})}})}}class rn extends i.View{DEFAULT_ROWS="3";DEFAULT_COLS="2";DEFAULT_HEADER="none";DEFAULT_TYPE="default";constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.textInputRowsView=u(s("Rows"),n),this.textInputColsView=u(s("Columns"),n),this.headersSelect=d(s("Headers"),this._getHeaderOptions(s),n),this.tabletypeSelect=d(s("Table Type"),this._getTableTypeOptions(s),n),this.textCaption=u(s("Caption"),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form"],tabindex:"-1"},children:[c(this.textInputRowsView),c(this.textInputColsView),c(this.headersSelect),c(this.tabletypeSelect),c(this.textCaption),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.textInputRowsView.children[1],this.textInputColsView.children[1],this.headersSelect.children[1],this.tabletypeSelect.children[1],this.textCaption.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get rows(){return this.textInputRowsView.children[1].element.value.trim()}set rows(e){this.textInputRowsView.children[1].element.value=e.trim()}get cols(){return this.textInputColsView.children[1].element.value.trim()}set cols(e){this.textInputColsView.children[1].element.value=e.trim()}get headers(){return this.headersSelect.children[1].value}set headers(e){this.headersSelect.children[1].value=e}get tabletype(){return this.tabletypeSelect.children[1].value}set tabletype(e){this.tabletypeSelect.children[1].value=e}set caption(e){this.textCaption.children[1].element.value=e.trim()}get caption(){return this.textCaption.children[1].element.value.trim()}setValues(e){this.rows=e?.rows||this.DEFAULT_ROWS,this.cols=e?.cols||this.DEFAULT_COLS,this.headers=e?.headers||this.DEFAULT_HEADER,this.tabletype=e?.tabletype||this.DEFAULT_TYPE,this.caption=e?.caption||""}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return t.includes("text")?this.textInputRowsView.errorText=t:t.includes("URL")&&(this.textInputColsView.errorText=t),!1}return!0}resetFormStatus(){this.textInputRowsView.errorText=null,this.textInputColsView.errorText=null}_getHeaderOptions(e){return[{value:"none",title:e("None")},{value:"row",title:e("First row")},{value:"column",title:e("First column")},{value:"both",title:e("Both")}]}_getTableTypeOptions(e){return[{value:"default",title:e("Default")},{value:"fixed",title:e("Fixed")}]}}class an extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkTable");var n;this.form=new rn((n=e.t,[e=>e.rows.length?e.cols.length?void 0:n("The cols field must not be empty."):n("The rows field must not be empty.")]),e.locale,t),e.ui.componentFactory.add("websparkTable",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;this.editor.commands.get("insertTable");function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Webspark table"),icon:'<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"\n "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="16.000000pt" height="16.000000pt" viewBox="0 0 16.000000 16.000000"\n preserveAspectRatio="xMidYMid meet">\n\n<g transform="translate(0.000000,16.000000) scale(0.100000,-0.100000)"\nfill="#000000" stroke="none">\n<path d="M0 80 l0 -70 80 0 80 0 0 70 0 70 -80 0 -80 0 0 -70z m50 10 c0 -13\n-7 -20 -20 -20 -13 0 -20 7 -20 20 0 13 7 20 20 20 13 0 20 -7 20 -20z m50 0\nc0 -13 -7 -20 -20 -20 -13 0 -20 7 -20 20 0 13 7 20 20 20 13 0 20 -7 20 -20z\nm50 0 c0 -13 -7 -20 -20 -20 -13 0 -20 7 -20 20 0 13 7 20 20 20 13 0 20 -7\n20 -20z m-100 -50 c0 -13 -7 -20 -20 -20 -13 0 -20 7 -20 20 0 13 7 20 20 20\n13 0 20 -7 20 -20z m50 0 c0 -13 -7 -20 -20 -20 -13 0 -20 7 -20 20 0 13 7 20\n20 20 13 0 20 -7 20 -20z m50 0 c0 -13 -7 -20 -20 -20 -13 0 -20 7 -20 20 0\n13 7 20 20 20 13 0 20 -7 20 -20z"/>\n</g>\n</svg>\n',tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.textInputRowsView.children[1].select(),t.focus()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("insertWebsparkTable",{rows:t.rows,cols:t.cols,headers:t.headers,tabletype:t.tabletype,caption:t.caption}),l())})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class cn extends e.Plugin{static get requires(){return[ln,an]}}class dn extends e.Command{execute({spacingtop:e,spacingbottom:t,spacingleft:n,spacingright:s,roundedimage:o}){const{model:i}=this.editor;i.change((l=>{const r=i.document.selection.getSelectedElement();r&&(l.setAttribute("spacingTop",e,r),l.setAttribute("spacingBottom",t,r),l.setAttribute("spacingRight",s,r),l.setAttribute("spacingLeft",n,r),l.setAttribute("roundedImage",o,r))}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document,n=["imageInline","imageBlock"].some((n=>e.schema.findAllowedParent(t.getFirstPosition(),n)));this.isEnabled=null!==n;const s=t.getSelectedElement();"imageBlock"===s?.name||"imageInline"===s?.name?(this.value=Object.fromEntries(s.getAttributes()),e.change((e=>{e.setAttribute("imageFluid",!0,s)}))):this.value=null}}class un extends e.Plugin{static get requires(){return[t.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertWebsparkAdvancedImage",new dn(this.editor))}_defineSchema(){const e=this.editor.model.schema;e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["spacingTop","spacingBottom","spacingLeft","spacingRight","roundedImage","imageFluid"]}),e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["spacingTop","spacingBottom","spacingLeft","spacingRight","roundedImage","imageFluid"]})}_defineConverters(){const{conversion:e}=this.editor;[{htmlName:"spacing-top",modelName:"spacingTop"},{htmlName:"spacing-bottom",modelName:"spacingBottom"},{htmlName:"spacing-right",modelName:"spacingRight"},{htmlName:"spacing-left",modelName:"spacingLeft"},{htmlName:"rounded-circle",modelName:"roundedImage"}].forEach((t=>{e.for("upcast").attributeToAttribute({view:{key:"class",value:new RegExp(t.htmlName+"+")},model:{key:t.modelName,value:e=>{let n=Array.from(e._classes).filter((e=>e.includes(t.htmlName)));return 0===n.length?"none":n[0]}}}),e.for("downcast").attributeToAttribute({model:{name:"imageBlock",key:t.modelName},view:e=>{if("none"!==e)return{key:"class",value:e}}}),e.for("downcast").attributeToAttribute({model:{name:"imageInline",key:t.modelName},view:e=>({key:"class",value:e})})})),e.for("downcast").attributeToAttribute({model:{name:"imageBlock",key:"imageFluid"},view:e=>({key:"class",value:"img-fluid"})}),e.for("downcast").attributeToAttribute({model:{name:"imageInline",key:"imageFluid"},view:e=>({key:"class",value:"img-fluid"})}),e.for("upcast").attributeToAttribute({view:{key:"class",value:"img-fluid"},model:{key:"imageFluid",value:e=>!0}})}}class hn extends i.View{constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.spacingTopSelect=d(s("Spacing top"),this._getSpacingOptions(s,"top"),n),this.spacingBottomSelect=d(s("Spacing bottom"),this._getSpacingOptions(s,"bottom"),n),this.spacingLeftSelect=d(s("Spacing left"),this._getSpacingOptions(s,"left"),n),this.spacingRightSelect=d(s("Spacing right"),this._getSpacingOptions(s,"right"),n),this.roundedImage=d(s("Round image"),[{value:"none",title:s("No")},{value:"rounded-circle",title:s("Yes")}],n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form"],tabindex:"-1"},children:[c(this.spacingTopSelect),c(this.spacingBottomSelect),c(this.spacingLeftSelect),c(this.spacingRightSelect),c(this.roundedImage),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}_getSpacingOptions(e,t){return[{value:"none",title:e("None")},{value:`spacing-${t}-8`,title:e("8px")},{value:`spacing-${t}-16`,title:e("16px")},{value:`spacing-${t}-24`,title:e("24px")}]}render(){super.render(),(0,i.submitHandler)({view:this});[this.spacingTopSelect.children[1],this.spacingBottomSelect.children[1],this.spacingLeftSelect.children[1],this.spacingRightSelect.children[1],this.roundedImage.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get spacingtop(){return this.spacingTopSelect.children[1].value}set spacingtop(e){this.spacingTopSelect.children[1].value=e}get spacingbottom(){return this.spacingBottomSelect.children[1].value}set spacingbottom(e){this.spacingBottomSelect.children[1].value=e}get spacingright(){return this.spacingRightSelect.children[1].value}set spacingright(e){this.spacingRightSelect.children[1].value=e}get spacingleft(){return this.spacingLeftSelect.children[1].value}set spacingleft(e){this.spacingLeftSelect.children[1].value=e}get roundedimage(){return this.roundedImage.children[1].value}set roundedimage(e){this.roundedImage.children[1].value=e}setValues(e){this.spacingtop=e?.spacingTop,this.spacingbottom=e?.spacingBottom,this.spacingleft=e?.spacingLeft,this.spacingright=e?.spacingRight,this.roundedimage=e?.roundedImage}isValid(){return!0}}class mn extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertWebsparkAdvancedImage");this.form=new hn((e.t,[]),e.locale,t),e.ui.componentFactory.add("websparkAdvancedImage",(e=>{const n=(0,i.createDropdown)(e);return this._setUpDropdown(n,this.form,t),this._setUpForm(this.form,n,t),n}))}_setUpDropdown(e,t,n){const s=this.editor,o=s.t,i=e.buttonView;function l(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(n),e.panelView.children.add(t),i.set({label:o("Image styles"),tooltip:!0}),i.on("open",(()=>{t.setValues(n.value),t.focus()}),{priority:"low"}),e.on("submit",(()=>{s.execute("insertWebsparkAdvancedImage",{spacingtop:t.spacingtop,spacingbottom:t.spacingbottom,spacingright:t.spacingright,spacingleft:t.spacingleft,roundedimage:t.roundedimage}),l()})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>l()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class gn extends e.Plugin{static get requires(){return[un,mn]}}class pn extends e.Command{refresh(){const e=this.editor.model.document.selection,t=this._getClosestSelectedDrupalMediaElement(e);this.isEnabled=!!t&&t.getAttribute("drupalMediaEntityType")&&"media"===t.getAttribute("drupalMediaEntityType")&&"METADATA_ERROR"!==t.getAttribute("drupalMediaEntityType")&&"remote_video"===t.getAttribute("drupalMediaType"),this.isEnabled&&this.editor.execute("addInlineStyle","w100")}execute(e){const{model:t}=this.editor,n=this._getClosestSelectedDrupalMediaElement(t.document.selection);t.change((t=>{t.setAttribute("dataInlineStyle",e,n)}))}_getClosestSelectedDrupalMediaElement(e){const t=e.getSelectedElement();return this._isDrupalMedia(t)?t:e.getFirstPosition().findAncestor("drupalMedia")}_isDrupalMedia(e){return!!e&&e.is("element","drupalMedia")}}class wn extends e.Plugin{static get pluginName(){return"WebsparkMediaAlterEditing"}constructor(e){super(e),this.attrs={dataInlineStyle:"data-inline-style"},this.converterAttributes=["dataInlineStyle"]}init(){const e=this.editor.model.schema,t=this.editor.conversion;e.isRegistered("drupalMedia")&&e.extend("drupalMedia",{allowAttributes:["dataInlineStyle"]}),Object.keys(this.attrs).forEach((e=>{const n={model:{key:e,name:"drupalMedia"},view:{key:"style",value:{width:"100%","max-width":"100%"}}};t.for("upcast").attributeToAttribute(n),t.for("downcast").attributeToAttribute(n)})),this.editor.commands.add("addInlineStyle",new pn(this.editor))}}class bn extends e.Plugin{static get requires(){return[wn]}}function fn(e,t,n){const s=e?e.getAttribute("listType"):"";if("forward"===n)for(;e&&e.getAttribute("listType")===s;)t.includes(e)||t.push(e),e=e.nextSibling;else for(;e&&e.getAttribute("listType")===s;)t.includes(e)||t.push(e),e=e.previousSibling}function kn(e){let t=(0,b.first)(e.document.selection.getSelectedBlocks());const n=[];e.change((e=>{fn(t,n,"backward"),fn(t,n,"forward"),n.forEach((t=>{"bulleted"===t.getAttribute("listType")?e.setAttribute("htmlUlAttributes",{classes:"uds-list"},t):"numbered"===t.getAttribute("listType")&&e.setAttribute("htmlOlAttributes",{classes:"uds-list"},t)}))}))}function vn(e,t){const n=t.commands.get("bulletedListOld").value?Cn(t.t):t.commands.get("numberedListOld").value?[{value:"default-list",title:(s=t.t)("Default")},{value:"maroon",title:s("Maroon")},{value:"light-smokemode",title:s("Gray 1")},{value:"smokemode",title:s("Gray 2")},{value:"darkmode",title:s("Gray 7")},{value:"darkmode-gold",title:s("Gray 7 Gold")},{value:"stp-default",title:s("Step List Default")},{value:"stp-gold-counter",title:s("Step List Gold Counter")},{value:"stp-maroon-counter",title:s("Step List Maroon Counter")},{value:"stp-smokemode",title:s("Step List Gray 2")},{value:"stp-smokemode-gold",title:s("Step List Gray 2 Gold Counter")},{value:"stp-smokemode-maroon",title:s("Step List Gray 2 Maroon Counter")},{value:"stp-lightsmokemode",title:s("Step List Gray 1")},{value:"stp-lightsmokemode-gold",title:s("Step List Gray 1 Gold Counter")},{value:"stp-lightsmokemode-maroon",title:s("Step List Gray 1 Maroon Counter")},{value:"stp-darkmode",title:s("Step List Gray 7")},{value:"stp-darkmode-gold",title:s("Step List Gray 7 Gold Counter")}]:"";var s;if(!n)return;let o=(0,b.first)(t.model.document.selection.getSelectedBlocks());const i=[];let l=[],r="";fn(o,i,"backward"),fn(o,i,"forward"),i.forEach((e=>{if(0==e.getAttribute("listIndent"))try{"bulleted"===e.getAttribute("listType")?(l=e.getAttribute("htmlUlAttributes").classes,r=e.getAttribute("listType")):"numbered"===e.getAttribute("listType")&&(l=e.getAttribute("htmlOlAttributes").classes,r=e.getAttribute("listType"))}catch(e){}})),Array.isArray(l)||(l=l.split(" ")),e.classSelect.children[1].element.options.length=0,n.forEach((t=>{const n=document.createElement("option");n.value=t.value,n.text=t.title;let s=[];s="bulleted"===r?yn(t.value).split(" "):Tn(t.value).split(" "),function(e,t){if(e.length!==t.length)return!1;const n=new Set(e),s=new Set(t);for(const e of n)if(!s.has(e))return!1;return!0}(s,l)&&(n.defaultSelected=!0),e.classSelect.children[1].element.appendChild(n)}))}function Cn(e){return[{value:"default-list",title:e("Default")},{value:"maroon",title:e("Maroon")},{value:"light-smokemode",title:e("Gray 1")},{value:"smokemode",title:e("Gray 2")},{value:"darkmode",title:e("Gray 7")},{value:"darkmode-gold",title:e("Gray 7 Gold Bullet")},{value:"icn-default",title:e("Icon list")},{value:"icn-maroon",title:e("Icon list Maroon")},{value:"icn-darkmode",title:e("Icon list Gray 7")},{value:"icn-darkmode-gold",title:e("Icon list Gray 7 Gold")}]}function yn(e){let t=e,n=xn(e);if(n=`wp-${e}`,t=t||"default-list",t.startsWith("icn"))switch(n+=" uds-list fa-ul",t){case"icn-maroon":n=_n(n,["darkmode","gold"]),n+=" maroon";break;case"icn-darkmode":n=_n(n,["gold","maroon"]),n+=" darkmode";break;case"icn-darkmode-gold":n=_n(n,["maroon"]),n+=" darkmode gold"}else{if(n=_n(n,["fa-ul"]),t){const e=["default-list","maroon","light-smokemode","smokemode","darkmode"];for(const s of e)n.includes(s)&&t!==s&&(n=n.replace(s,""));n.includes("darkmode")&&n.includes("gold")&&"darkmode-gold"!=t&&(n=_n(n,["darkmode","gold"])),n+="darkmode-gold"===t?" darkmode gold":" "+t}n.includes("uds-list")||(n+=" uds-list")}return n}function Tn(e){let t=e;t=t||"default-list";let n=xn(e);if(n=`wp-${e}`,t.startsWith("stp"))n+=" uds-list uds-steplist","stp-default"===t&&(n=_n(n,["uds-steplist-gold","uds-steplist-maroon","smokemode","light-smokemode","darkmode","maroon"])),"stp-gold-counter"===t&&(n=_n(n,["uds-steplist-maroon","smokemode","light-smokemode","darkmode"]),n+=" uds-steplist-gold"),"stp-maroon-counter"===t&&(n=_n(n,["uds-steplist-gold","smokemode","light-smokemode","darkmode"]),n+=" uds-steplist-maroon"),"stp-smokemode"===t&&(n=_n(n,["uds-steplist-gold","uds-steplist-maroon","light-smokemode","darkmode"]),n+=" smokemode"),"stp-smokemode-gold"===t&&(n=_n(n,["uds-steplist-maroon","light-smokemode","darkmode"]),n+=" smokemode uds-steplist-gold"),"stp-smokemode-maroon"===t&&(n=_n(n,["uds-steplist-maroon","light-smokemode","darkmode"]),n+=" smokemode uds-steplist-maroon"),"stp-lightsmokemode"===t&&(n=_n(n,["uds-steplist-gold","uds-steplist-maroon","smokemode","darkmode"]),n+=" light-smokemode"),"stp-lightsmokemode-gold"===t&&(n=_n(n,["uds-steplist-maroon","smokemode","darkmode"]),n+=" light-smokemode uds-steplist-gold"),"stp-lightsmokemode-maroon"===t&&(n=_n(n,["uds-steplist-gold","smokemode","darkmode"]),n+=" light-smokemode uds-steplist-maroon"),"stp-darkmode"===t&&(n=_n(n,["uds-steplist-gold","uds-steplist-maroon","light-smokemode","darkmode"]),n+=" darkmode"),"stp-darkmode-gold"===t&&(n=_n(n,["uds-steplist-maroon","smokemode","light-smokemode"]),n+=" darkmode uds-steplist-gold");else{if(n=_n(n,["uds-steplist","uds-steplist-maroon","uds-steplist-gold"]),t){const e=["default-list","maroon","light-smokemode","smokemode","darkmode"];for(const s of e)n.includes(s)&&t!==s&&(n=n.replace(s,""));n.includes("darkmode")&&n.includes("gold")&&"darkmode-gold"!=t&&(n=_n(n,["darkmode","gold"])),n+="darkmode-gold"===t?" darkmode gold":" "+t}n.includes("uds-list")||(n+=" uds-list")}return n}function _n(e,t){let n=e;for(const s of t){const t=new RegExp(s,"g");n=e.replace(t,"")}return n}function xn(e){return e?e.replace(/\bwp-\w+\b/g,""):""}class Sn extends e.Command{execute({styleClass:e}){const t=this.editor.model;t.document.selection,t.document;let n=(0,b.first)(this.editor.model.document.selection.getSelectedBlocks());const s=[],o=this.editor.commands.get("bulletedListOld").value?yn(e):this.editor.commands.get("numberedListOld").value?Tn(e):"";t.change((e=>{fn(n,s,"backward"),fn(n,s,"forward"),s.forEach((t=>{0==t.getAttribute("listIndent")&&("bulleted"===t.getAttribute("listType")?e.setAttribute("htmlUlAttributes",{classes:o},t):"numbered"===t.getAttribute("listType")&&e.setAttribute("htmlOlAttributes",{classes:o},t))}))}))}refresh(){this.isEnabled=this._checkEnabled();let e=(0,b.first)(this.editor.model.document.selection.getSelectedBlocks());const t=[];fn(e,t,"backward"),fn(e,t,"forward"),t.forEach((e=>{this.value=Object.fromEntries(e.getAttributes())}))}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedListOld"),n=e.commands.get("bulletedListOld");return t.isEnabled||n.isEnabled}}class En extends e.Plugin{static get requires(){return[t.Widget,i.ContextualBalloon]}static get pluginName(){return"WebsparkListStyleEditing"}constructor(e){super(e)}init(){const e=this.editor,{model:t}=this.editor;e.commands.add("insertliststyle",new Sn(e)),e.commands.add("bulletedListOld",e.commands.get("bulletedList"));const n={execute:function(n){e.execute("bulletedListOld",n),kn(t)}};e.commands.add("bulletedList",n),e.commands.get("bulletedList").isEnabled=!0,e.commands.add("numberedListOld",e.commands.get("numberedList"));const s={execute:function(n){e.execute("numberedListOld",n),kn(t)}};e.commands.add("numberedList",s),e.commands.get("numberedList").isEnabled=!0}}class An extends i.View{constructor(t,n){super(n);const s=n.t;this.focusTracker=new b.FocusTracker,this.keystrokes=new b.KeystrokeHandler,this.classSelect=d(s("List properties"),Cn(s),n),this.saveButtonView=h(s("Save"),e.icons.check,"ck-button-save",n),this.saveButtonView.type="submit",this.cancelButtonView=h(s("Cancel"),e.icons.cancel,"ck-button-cancel",n),this.cancelButtonView.delegate("execute").to(this,"cancel"),this._focusables=new i.ViewCollection,this._focusCycler=new i.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-webspark-form","webspark-liststyle-dialog"],tabindex:"-1"},children:[c(this.classSelect),a([this.saveButtonView,this.cancelButtonView],["ck-webspark-form-buttons"])]})}render(){super.render(),(0,i.submitHandler)({view:this});[this.classSelect.children[1],this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get classselect(){return this.classSelect.children[1].value}set classselect(e){this.classSelect.children[1].value=e}setValues(e){this.classselect=e?.classselect}isValid(){return!0}}class Vn extends e.Plugin{static get requires(){return[i.ContextualBalloon]}init(){const e=this.editor,t=e.commands.get("insertliststyle");this.form=new An((this.editor.t,[]),this.editor.locale,t);const n=this.editor.editing.view.document;this.listenTo(n,"click",(()=>{vn(this.form,this.editor)})),this.listenTo(n,"change",(()=>{vn(this.form,this.editor)})),e.ui.componentFactory.add("websparkListStyle",(()=>{const n=(0,i.createDropdown)(e.locale);this._setUpDropdown(n,this.form),this._setUpForm(this.form,n,t);const s=this.editor.commands.get("bulletedListOld"),o=this.editor.commands.get("numberedListOld");return n.bind("isEnabled").toMany([s,o],"value",(e=>s.value||o.value)),n}))}_findUlParent(e){return e&&e.parent?"ul"===e.name?e:this._findUlParent(e.parent):null}_setUpDropdown(e,t){const n=this.editor,s=n.t,o=e.buttonView;function i(){n.editing.view.focus(),e.isOpen=!1}e.panelView.children.add(t),o.set({label:s("List Properties"),icon:'<?xml version="1.0" encoding="utf-8"?>\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\n<svg fill="#000000" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23,6a1,1,0,0,1-1,1H12a1,1,0,0,1,0-2H22A1,1,0,0,1,23,6Zm-1,5H12a1,1,0,0,0,0,2H22a1,1,0,0,0,0-2Zm0,6H12a1,1,0,0,0,0,2H22a1,1,0,0,0,0-2ZM9,12A4,4,0,1,1,5,8,4,4,0,0,1,9,12ZM7,12a2,2,0,1,0-2,2A2,2,0,0,0,7,12Z"/></svg>',tooltip:!0}),o.on("open",(()=>{try{t.classselect&&t.classselect.children[1].select()}catch(e){}t.focus()}),{priority:"low"}),e.on("submit",(()=>{n.execute("insertliststyle",{styleClass:t.classselect}),i()})),e.on("change:isOpen",(()=>t.element.reset())),e.on("cancel",(()=>i()))}_setUpForm(e,t,n){e.delegate("submit","cancel").to(t),e.saveButtonView.bind("isEnabled").to(n)}}class Rn extends e.Plugin{static get requires(){return[En,Vn]}}const In={WebsparkButton:v,WebsparkDivider:_,WebsparkLead:V,WebsparkHighlightedHeading:H,WebsparkBlockquote:M,WebsparkTable:cn,WebsparkAdvancedImage:gn,WebsparkMediaAlter:bn,WebsparkListStyle:Rn}})(),s=s.default})()));